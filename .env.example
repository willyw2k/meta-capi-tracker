# ─── Meta CAPI Tracker ──────────────────────────────────────

# API key for authenticating client-side tracking requests
TRACKING_API_KEY=your-secure-api-key-here

# Allowed origins for CORS (comma-separated, or * for all)
TRACKING_ALLOWED_ORIGINS=https://shop.example.com,https://blog.example.com,https://www.example.com

# Queue settings
TRACKING_QUEUE_CONNECTION=redis
TRACKING_QUEUE_NAME=meta-capi

# Event deduplication window (minutes)
TRACKING_DEDUP_WINDOW=60

# Max retry attempts
TRACKING_MAX_RETRIES=3

# Data retention (days)
TRACKING_RETENTION_SENT=90
TRACKING_RETENTION_FAILED=30

# Meta Graph API version
META_GRAPH_API_VERSION=v21.0

# ─── Cookie Keeper ──────────────────────────────────────────

# Enable server-side cookie setting (survives Safari ITP)
TRACKING_COOKIE_KEEPER=true

# Cookie max age in days (default 180)
TRACKING_COOKIE_MAX_AGE=180

# ─── Ad Blocker Recovery ────────────────────────────────────

# Disguised endpoint path (should look like a generic API path)
# Change this to something unique if /collect gets added to filter lists
TRACKING_DISGUISED_PATH=collect

# ─── Advanced Matching ──────────────────────────────────────

# Enable server-side enrichment pipeline (profile lookup, phone→country inference)
TRACKING_ADVANCED_MATCHING=true

# Store user profiles for cross-session enrichment
TRACKING_STORE_PROFILES=true

# Profile retention in days (auto-pruned by tracking:prune-profiles)
TRACKING_PROFILE_RETENTION=365
