{
  "version": 3,
  "sources": ["../src/state.ts", "../src/utils.ts", "../src/ad-block-recovery.ts", "../src/transport.ts", "../src/cookie-keeper.ts", "../src/pixel-router.ts", "../src/advanced-matching.ts", "../src/browser-pixel.ts", "../src/gtm.ts", "../src/index.ts"],
  "sourcesContent": ["/**\n * Shared mutable state \u2014 centralised to avoid circular imports.\n */\nimport type { TrackerConfig, TrackingEvent } from './types';\n\nexport const VERSION = '2.1.0';\nexport const MAX_QUEUE_SIZE = 50;\nexport const RETRY_DELAYS: readonly number[] = [1000, 5000, 15000];\nexport const BATCH_INTERVAL = 2000;\n\nexport let config: TrackerConfig = {\n  endpoint: '', apiKey: '', pixelId: '', pixels: [],\n  autoPageView: true, debug: false, hashPii: true,\n  respectDnt: false, batchEvents: true, minMatchQuality: 60,\n  browserPixel: { enabled: false, autoPageView: true, syncEvents: true },\n  cookieKeeper: { enabled: true, refreshInterval: 86_400_000, maxAge: 180, cookieNames: ['_fbp', '_fbc', '_mt_id'] },\n  adBlockRecovery: { enabled: true, proxyPath: '/collect', useBeacon: true, useImage: true, customEndpoints: [] },\n  advancedMatching: {\n    enabled: true, autoCaptureForms: true, captureUrlParams: true,\n    captureDataLayer: true, captureMetaTags: true, autoIdentifyOnSubmit: true,\n    formFieldMap: {}, dataLayerKey: 'dataLayer', userDataKey: null,\n  },\n  gtm: {\n    enabled: false, autoMapEcommerce: true, pushToDataLayer: true,\n    dataLayerKey: 'dataLayer', eventMapping: {},\n  },\n};\n\nexport const queue: TrackingEvent[] = [];\nexport let batchTimer: ReturnType<typeof setTimeout> | null = null;\nexport let initialized = false;\nexport let transportMethod = 'fetch';\nexport let adBlockDetected = false;\nexport let cookieKeeperTimer: ReturnType<typeof setInterval> | null = null;\n\n// Setters (ES module exported `let` bindings are read-only from outside)\nexport function mergeConfig(opts: Partial<TrackerConfig>): void {\n  Object.assign(config, opts, {\n    browserPixel: { ...config.browserPixel, ...((opts.browserPixel as object) ?? {}) },\n    cookieKeeper: { ...config.cookieKeeper, ...((opts.cookieKeeper as object) ?? {}) },\n    adBlockRecovery: { ...config.adBlockRecovery, ...((opts.adBlockRecovery as object) ?? {}) },\n    advancedMatching: { ...config.advancedMatching, ...((opts.advancedMatching as object) ?? {}) },\n    gtm: { ...config.gtm, ...((opts.gtm as object) ?? {}) },\n  });\n}\nexport function setInitialized(v: boolean): void { initialized = v; }\nexport function setTransportMethod(v: string): void { transportMethod = v; }\nexport function setAdBlockDetected(v: boolean): void { adBlockDetected = v; }\nexport function setBatchTimer(v: ReturnType<typeof setTimeout> | null): void { batchTimer = v; }\nexport function setCookieKeeperTimer(v: ReturnType<typeof setInterval> | null): void { cookieKeeperTimer = v; }\n\n// Logging\nexport function spliceQueue(count: number): TrackingEvent[] { return queue.splice(0, count); }\nexport function pushQueue(event: TrackingEvent): void { queue.push(event); }\nexport function log(...args: unknown[]): void { if (config.debug) console.log('[MetaTracker]', ...args); }\nexport function warn(...args: unknown[]): void { if (config.debug) console.warn('[MetaTracker]', ...args); }\n", "/**\n * Utility helpers \u2014 storage, hashing, ID generation.\n */\nimport { config } from './state';\n\nexport async function sha256(value: string): Promise<string | null> {\n  if (!value) return null;\n  const data = new TextEncoder().encode(value.toString().trim().toLowerCase());\n  const hash = await crypto.subtle.digest('SHA-256', data);\n  return Array.from(new Uint8Array(hash)).map((b) => b.toString(16).padStart(2, '0')).join('');\n}\n\nexport function isHashed(value: unknown): value is string {\n  return typeof value === 'string' && /^[a-f0-9]{64}$/.test(value);\n}\n\nexport function generateEventId(): string {\n  return `evt_${Date.now().toString(36)}_${Math.random().toString(36).substring(2, 10)}`;\n}\n\nexport function generateVisitorId(): string {\n  const stored = getFromStorage('_mt_id');\n  if (stored) return stored;\n  const id = 'mt.' + Date.now().toString(36) + '.' + Math.random().toString(36).substring(2, 12);\n  saveToStorage('_mt_id', id);\n  return id;\n}\n\nfunction getRootDomain(): string {\n  try {\n    const parts = window.location.hostname.split('.');\n    if (parts.length <= 1 || /^\\d+$/.test(parts[parts.length - 1])) return '';\n    return parts.slice(-2).join('.');\n  } catch { return ''; }\n}\n\nexport function setCookie(name: string, value: string, days: number): void {\n  const maxAge = days * 86_400;\n  const secure = location.protocol === 'https:' ? '; Secure' : '';\n  const domain = getRootDomain();\n  const domainStr = domain ? `; domain=.${domain}` : '';\n  document.cookie = `${name}=${encodeURIComponent(value)}; path=/${domainStr}; max-age=${maxAge}; SameSite=Lax${secure}`;\n}\n\nexport function getCookie(name: string): string | null {\n  const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));\n  return match ? decodeURIComponent(match[2]) : null;\n}\n\nexport function deleteCookie(name: string): void {\n  const domain = getRootDomain();\n  document.cookie = `${name}=; path=/${domain ? `; domain=.${domain}` : ''}; max-age=0`;\n}\n\nexport function getFromStorage(key: string): string | null {\n  const c = getCookie(key);\n  if (c) return c;\n  try { return localStorage.getItem('mt_' + key); } catch { return null; }\n}\n\nexport function saveToStorage(key: string, value: string, days?: number): void {\n  days = days ?? (config.cookieKeeper.maxAge || 180);\n  setCookie(key, value, days);\n  try { localStorage.setItem('mt_' + key, value); } catch { /* noop */ }\n}\n\nexport function removeFromStorage(key: string): void {\n  deleteCookie(key);\n  try { localStorage.removeItem('mt_' + key); } catch { /* noop */ }\n}\n", "/**\n * Ad Blocker Recovery \u2014 detection, disguised endpoints, payload obfuscation.\n */\nimport { config, adBlockDetected, setAdBlockDetected, log, VERSION } from './state';\nimport type { DisguisedPayload } from './types';\n\nexport const AdBlockRecovery = {\n  async detect(): Promise<boolean> {\n    if (!config.adBlockRecovery.enabled) return false;\n    try {\n      const testUrl = config.endpoint.replace(/\\/track\\/?$/, '') + '/health';\n      const ctrl = new AbortController();\n      const t = setTimeout(() => ctrl.abort(), 3000);\n      const r = await fetch(testUrl, { method: 'GET', signal: ctrl.signal, cache: 'no-store' });\n      clearTimeout(t);\n      if (!r.ok) throw new Error('Blocked');\n      return false;\n    } catch {\n      setAdBlockDetected(true);\n      log('AdBlockRecovery: DETECTED');\n      return true;\n    }\n  },\n\n  getEndpoint(path: string): string {\n    if (adBlockDetected && config.adBlockRecovery.proxyPath) {\n      return config.endpoint.replace(/\\/api\\/v1\\/track\\/?$/, '') + config.adBlockRecovery.proxyPath + path;\n    }\n    return config.endpoint + path;\n  },\n\n  getFallbackEndpoints(path: string): string[] {\n    const eps = [this.getEndpoint(path)];\n    for (const ep of config.adBlockRecovery.customEndpoints ?? []) eps.push(ep + path);\n    return eps;\n  },\n\n  disguisePayload(data: unknown): DisguisedPayload | unknown {\n    if (!adBlockDetected) return data;\n    return { d: btoa(JSON.stringify(data)), t: Date.now(), v: VERSION };\n  },\n\n  getHeaders(): Record<string, string> {\n    const h: Record<string, string> = { 'Content-Type': 'application/json' };\n    h[adBlockDetected ? 'X-Request-Token' : 'X-API-Key'] = config.apiKey;\n    return h;\n  },\n};\n", "/**\n * Transport Layer \u2014 fetch \u2192 beacon \u2192 XHR \u2192 image fallback chain.\n */\nimport { AdBlockRecovery } from './ad-block-recovery';\nimport {\n  config, adBlockDetected, transportMethod, setTransportMethod,\n  log, warn, RETRY_DELAYS,\n} from './state';\nimport type { TransportDef } from './types';\n\nexport function resolveEndpoint(path: string): string {\n  return adBlockDetected ? AdBlockRecovery.getEndpoint(path) : config.endpoint + path;\n}\n\nasync function viaFetch(url: string, data: unknown): Promise<unknown> {\n  const body = adBlockDetected ? AdBlockRecovery.disguisePayload(data) : data;\n  const r = await fetch(url, {\n    method: 'POST', headers: AdBlockRecovery.getHeaders(),\n    body: JSON.stringify(body), keepalive: true, credentials: 'include',\n  });\n  if (!r.ok) throw new Error(`HTTP ${r.status}`);\n  return r.json().catch(() => ({}));\n}\n\nfunction viaBeacon(url: string, data: unknown): Promise<unknown> {\n  const body = adBlockDetected ? AdBlockRecovery.disguisePayload(data) : data;\n  const blob = new Blob([JSON.stringify(body)], { type: 'application/json' });\n  if (!navigator.sendBeacon(url + '?api_key=' + encodeURIComponent(config.apiKey), blob)) {\n    throw new Error('Beacon failed');\n  }\n  return Promise.resolve({ sent: true });\n}\n\nfunction viaXhr(url: string, data: unknown): Promise<unknown> {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open('POST', url, true);\n    for (const [k, v] of Object.entries(AdBlockRecovery.getHeaders())) xhr.setRequestHeader(k, v);\n    xhr.withCredentials = true;\n    xhr.timeout = 10_000;\n    xhr.onload = () => xhr.status >= 200 && xhr.status < 300\n      ? resolve(JSON.parse(xhr.responseText || '{}'))\n      : reject(new Error(`XHR ${xhr.status}`));\n    xhr.onerror = () => reject(new Error('XHR error'));\n    xhr.ontimeout = () => reject(new Error('XHR timeout'));\n    const body = adBlockDetected ? AdBlockRecovery.disguisePayload(data) : data;\n    xhr.send(JSON.stringify(body));\n  });\n}\n\nfunction viaImage(url: string, data: unknown): Promise<unknown> {\n  return new Promise((resolve, reject) => {\n    const params = new URLSearchParams({ d: btoa(JSON.stringify(data)), k: config.apiKey, t: Date.now().toString() });\n    const imgUrl = url.replace(/\\/(event|batch)$/, '/pixel.gif') + '?' + params;\n    if (imgUrl.length > 4000) { reject(new Error('Payload too large')); return; }\n    const img = new Image(1, 1);\n    img.onload = () => resolve({ sent: true });\n    img.onerror = () => reject(new Error('Image pixel failed'));\n    img.src = imgUrl;\n  });\n}\n\nexport async function transportSend(url: string, data: unknown, attempt = 0): Promise<unknown> {\n  const transports: TransportDef[] = [\n    { name: 'fetch', fn: viaFetch },\n    { name: 'beacon', fn: viaBeacon, skip: !config.adBlockRecovery.useBeacon },\n    { name: 'xhr', fn: viaXhr },\n    { name: 'img', fn: viaImage, skip: !config.adBlockRecovery.useImage },\n  ].filter((t) => !t.skip);\n\n  for (const transport of transports) {\n    const pathSuffix = url.includes(config.endpoint)\n      ? url.replace(config.endpoint, '')\n      : url.replace(/^https?:\\/\\/[^/]+/, '').replace(/.*\\/api\\/v1\\/track/, '');\n    const endpoints = adBlockDetected ? AdBlockRecovery.getFallbackEndpoints(pathSuffix) : [url];\n\n    for (const ep of endpoints) {\n      try {\n        const result = await transport.fn(ep, data);\n        if (transport.name !== transportMethod) {\n          log(`Transport: ${transportMethod} \u2192 ${transport.name}`);\n          setTransportMethod(transport.name);\n        }\n        return result;\n      } catch (e: unknown) { log(`${transport.name} \u2192 ${ep}: ${(e as Error).message}`); }\n    }\n  }\n\n  if (attempt < RETRY_DELAYS.length) {\n    return new Promise((r) => setTimeout(() => r(transportSend(url, data, attempt + 1)), RETRY_DELAYS[attempt]));\n  }\n  warn('All transports exhausted');\n  return undefined;\n}\n", "/**\n * Cookie Keeper \u2014 ITP survival via server-side cookie renewal.\n */\nimport { config, log, warn, cookieKeeperTimer, setCookieKeeperTimer } from './state';\nimport { getCookie, setCookie, getFromStorage, saveToStorage, generateVisitorId } from './utils';\nimport { transportSend, resolveEndpoint } from './transport';\n\nexport const CookieKeeper = {\n  init(): void {\n    if (!config.cookieKeeper.enabled) return;\n    this.restoreCookies(); this.captureFbclid(); this.ensureFbp();\n    this.ensureVisitorId(); this.syncToServer(); this.scheduleRefresh();\n    log('CookieKeeper: ready', { fbp: this.getFbp(), fbc: this.getFbc() });\n  },\n\n  restoreCookies(): void {\n    for (const name of config.cookieKeeper.cookieNames ?? []) {\n      if (!getCookie(name)) {\n        try { const b = localStorage.getItem('mt_' + name); if (b) setCookie(name, b, config.cookieKeeper.maxAge); } catch { /* */ }\n      } else {\n        try { localStorage.setItem('mt_' + name, getCookie(name)!); } catch { /* */ }\n      }\n    }\n  },\n\n  captureFbclid(): void {\n    try {\n      const fbclid = new URL(window.location.href).searchParams.get('fbclid');\n      if (fbclid) saveToStorage('_fbc', `fb.1.${Math.floor(Date.now() / 1000)}.${fbclid}`, config.cookieKeeper.maxAge);\n    } catch { /* */ }\n  },\n\n  ensureFbp(): void {\n    if (!getFromStorage('_fbp')) {\n      saveToStorage('_fbp', `fb.1.${Date.now()}.${Math.floor(Math.random() * 2_147_483_647)}`, config.cookieKeeper.maxAge);\n    }\n  },\n\n  ensureVisitorId(): void { if (!getFromStorage('_mt_id')) generateVisitorId(); },\n\n  async syncToServer(): Promise<void> {\n    const cookies: Record<string, string | null> = {\n      _fbp: getFromStorage('_fbp'), _fbc: getFromStorage('_fbc'),\n      _mt_id: getFromStorage('_mt_id'), _mt_em: getFromStorage('_mt_em'), _mt_ph: getFromStorage('_mt_ph'),\n    };\n    if (!cookies._fbp && !cookies._fbc && !cookies._mt_id) return;\n    const last = getFromStorage('_mt_cookie_sync');\n    if (last && Date.now() - parseInt(last, 10) < config.cookieKeeper.refreshInterval) return;\n    try {\n      await transportSend(resolveEndpoint('/cookie-sync'), { cookies, domain: window.location.hostname, max_age: config.cookieKeeper.maxAge });\n      saveToStorage('_mt_cookie_sync', Date.now().toString(), 1);\n    } catch (e: unknown) { warn('CookieKeeper: sync failed', (e as Error).message); }\n  },\n\n  refreshCookies(): void {\n    for (const name of config.cookieKeeper.cookieNames ?? []) {\n      const v = getFromStorage(name); if (v) setCookie(name, v, config.cookieKeeper.maxAge);\n    }\n    saveToStorage('_mt_cookie_sync', '0', 1);\n    this.syncToServer();\n  },\n\n  scheduleRefresh(): void {\n    if (cookieKeeperTimer) clearInterval(cookieKeeperTimer);\n    setCookieKeeperTimer(setInterval(() => this.refreshCookies(), config.cookieKeeper.refreshInterval));\n    document.addEventListener('visibilitychange', () => { if (document.visibilityState === 'visible') this.restoreCookies(); });\n  },\n\n  getFbp(): string | null { return getFromStorage('_fbp'); },\n  getFbc(): string | null { return getFromStorage('_fbc'); },\n  getVisitorId(): string | null { return getFromStorage('_mt_id'); },\n};\n", "/**\n * Pixel Router \u2014 multi-domain pixel ID resolution.\n */\nimport { config } from './state';\n\nexport const PixelRouter = {\n  resolve(hostname?: string): string[] {\n    hostname = hostname ?? window.location.hostname;\n    if (!config.pixels?.length) return config.pixelId ? [config.pixelId] : [];\n    const matched: string[] = [];\n    let catchAll: string | null = null;\n    for (const pc of config.pixels) {\n      if (!pc.pixelId || !pc.domains) continue;\n      for (const pattern of pc.domains) {\n        if (pattern === '*') { catchAll = pc.pixelId; continue; }\n        if (this.matchDomain(hostname, pattern)) { matched.push(pc.pixelId); break; }\n      }\n    }\n    if (!matched.length && catchAll) matched.push(catchAll);\n    return [...new Set(matched)];\n  },\n\n  matchDomain(hostname: string, pattern: string): boolean {\n    if (hostname === pattern) return true;\n    if (pattern.startsWith('*.')) {\n      const suffix = pattern.substring(2);\n      return hostname.endsWith('.' + suffix) || hostname === suffix;\n    }\n    return hostname.endsWith('.' + pattern);\n  },\n\n  getAllPixelIds(): string[] {\n    if (!config.pixels?.length) return config.pixelId ? [config.pixelId] : [];\n    return [...new Set(config.pixels.map((p) => p.pixelId).filter(Boolean))];\n  },\n};\n", "/**\n * Advanced Matching \u2014 PII capture, normalisation, hashing, identity graph.\n *\n * Data sources (priority order):\n *   1. Explicit userData \u2192 track()\n *   2. identify() stored identity\n *   3. Auto-captured form data\n *   4. URL parameters\n *   5. DataLayer / GTM\n *   6. Meta tags / structured data\n */\n\nimport { config, log } from './state';\nimport { sha256, isHashed, getFromStorage } from './utils';\nimport { CookieKeeper } from './cookie-keeper';\nimport type {\n  MetaPiiField, CaptureSource, CapturedData,\n  HashedUserData, RawUserData, FieldPatterns, Normalizer,\n  AdvancedMatchingDiagnostics,\n} from './types';\n\n// \u2500\u2500 Module state \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nlet capturedData: CapturedData = {};\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// \u2500\u2500 NORMALIZERS (per Meta docs)\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nconst normalizers: Record<string, Normalizer> = {\n  em(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase();\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(v) ? v : null;\n  },\n  ph(v) {\n    if (!v) return null;\n    let d = v.replace(/\\D/g, '');\n    if (d.length < 7) return null;\n    if (d.startsWith('00')) d = d.substring(2);\n    return d || null;\n  },\n  fn(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase().replace(/^(mr|mrs|ms|miss|dr|prof)\\.?\\s*/i, '');\n    v = v.replace(/[^a-z\\s\\u00C0-\\u024F]/g, '');\n    try { v = v.normalize('NFD').replace(/[\\u0300-\\u036f]/g, ''); } catch { /* */ }\n    return v.trim() || null;\n  },\n  ln(v) { return normalizers.fn(v); },\n  ge(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase();\n    if (v.startsWith('m') || v === 'male') return 'm';\n    if (v.startsWith('f') || v === 'female') return 'f';\n    return null;\n  },\n  db(v) {\n    if (!v) return null;\n    v = v.trim();\n    if (/^\\d{8}$/.test(v)) return v;\n    const fmts: RegExp[] = [/^(\\d{4})-(\\d{2})-(\\d{2})$/, /^(\\d{2})\\/(\\d{2})\\/(\\d{4})$/, /^(\\d{2})-(\\d{2})-(\\d{4})$/];\n    for (const rx of fmts) {\n      const m = v.match(rx);\n      if (m) return m[1].length === 4 ? m[1] + m[2] + m[3] : m[3] + m[1] + m[2];\n    }\n    return null;\n  },\n  ct(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase().replace(/[^a-z\\s\\u00C0-\\u024F]/g, '');\n    try { v = v.normalize('NFD').replace(/[\\u0300-\\u036f]/g, ''); } catch { /* */ }\n    return v.trim() || null;\n  },\n  st(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase();\n    if (/^[a-z]{2}$/.test(v)) return v;\n    const m = v.match(/\\b([a-z]{2})\\b/);\n    return m ? m[1] : v.substring(0, 2);\n  },\n  zp(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase().replace(/\\s+/g, '');\n    if (/^\\d{5}(-\\d{4})?$/.test(v)) return v.substring(0, 5);\n    return v || null;\n  },\n  country(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase();\n    if (/^[a-z]{2}$/.test(v)) return v;\n    const map: Record<string, string> = {\n      'united states': 'us', 'usa': 'us', 'united kingdom': 'gb', 'uk': 'gb',\n      'canada': 'ca', 'australia': 'au', 'germany': 'de', 'france': 'fr',\n      'indonesia': 'id', 'japan': 'jp', 'india': 'in', 'brazil': 'br',\n      'mexico': 'mx', 'spain': 'es', 'italy': 'it', 'netherlands': 'nl',\n      'singapore': 'sg', 'malaysia': 'my', 'philippines': 'ph', 'thailand': 'th',\n      'vietnam': 'vn', 'south korea': 'kr', 'china': 'cn', 'taiwan': 'tw',\n      'hong kong': 'hk', 'new zealand': 'nz', 'portugal': 'pt', 'sweden': 'se',\n      'norway': 'no', 'denmark': 'dk', 'finland': 'fi', 'poland': 'pl',\n      'cambodia': 'kh', 'turkey': 'tr', 'argentina': 'ar', 'colombia': 'co',\n      'chile': 'cl', 'peru': 'pe', 'south africa': 'za', 'nigeria': 'ng',\n      'egypt': 'eg', 'saudi arabia': 'sa', 'united arab emirates': 'ae', 'uae': 'ae',\n      'russia': 'ru', 'ukraine': 'ua', 'ireland': 'ie', 'switzerland': 'ch',\n      'austria': 'at', 'belgium': 'be', 'czech republic': 'cz', 'romania': 'ro',\n    };\n    return map[v] ?? (v.length === 2 ? v : null);\n  },\n  external_id(v) { return v?.trim() || null; },\n};\n\n// \u2500\u2500 Field detection patterns \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nconst fieldPatterns: Record<string, FieldPatterns> = {\n  em: {\n    types: ['email'],\n    names: ['email', 'e-mail', 'user_email', 'userEmail', 'customer_email', 'login', 'username', 'emailAddress', 'email_address'],\n    ids: ['email', 'user-email', 'customer-email', 'signup-email', 'login-email'],\n    autocomplete: ['email'],\n    placeholders: ['email', 'e-mail', 'your email', 'email address'],\n  },\n  ph: {\n    types: ['tel'],\n    names: ['phone', 'telephone', 'tel', 'mobile', 'phone_number', 'phoneNumber', 'cell', 'cellphone', 'mobile_number', 'contact_number', 'whatsapp'],\n    ids: ['phone', 'telephone', 'mobile', 'phone-number'],\n    autocomplete: ['tel', 'tel-national', 'tel-local'],\n    placeholders: ['phone', 'telephone', 'mobile', 'whatsapp', 'nomor telepon', 'hp'],\n  },\n  fn: {\n    names: ['first_name', 'firstName', 'fname', 'given-name', 'givenName', 'first', 'name_first', 'billing_first_name'],\n    ids: ['first-name', 'firstname', 'fname', 'given-name'],\n    autocomplete: ['given-name'],\n    placeholders: ['first name', 'given name', 'nama depan'],\n  },\n  ln: {\n    names: ['last_name', 'lastName', 'lname', 'family-name', 'familyName', 'surname', 'last', 'name_last', 'billing_last_name'],\n    ids: ['last-name', 'lastname', 'lname', 'family-name', 'surname'],\n    autocomplete: ['family-name'],\n    placeholders: ['last name', 'family name', 'surname', 'nama belakang'],\n  },\n  ct: {\n    names: ['city', 'town', 'billing_city', 'shipping_city', 'address_city'],\n    ids: ['city', 'billing-city', 'shipping-city'],\n    autocomplete: ['address-level2'],\n    placeholders: ['city', 'town', 'kota'],\n  },\n  st: {\n    names: ['state', 'province', 'region', 'billing_state', 'shipping_state'],\n    ids: ['state', 'province', 'region', 'billing-state'],\n    autocomplete: ['address-level1'],\n    placeholders: ['state', 'province', 'region', 'provinsi'],\n  },\n  zp: {\n    names: ['zip', 'zipcode', 'zip_code', 'postal', 'postal_code', 'postcode', 'billing_zip', 'billing_postcode', 'shipping_zip'],\n    ids: ['zip', 'zipcode', 'postal-code', 'postcode'],\n    autocomplete: ['postal-code'],\n    placeholders: ['zip', 'postal code', 'zip code', 'kode pos'],\n  },\n  country: {\n    names: ['country', 'country_code', 'countryCode', 'billing_country', 'shipping_country'],\n    ids: ['country', 'billing-country', 'shipping-country'],\n    autocomplete: ['country', 'country-name'],\n    placeholders: ['country', 'negara'],\n  },\n  ge: { names: ['gender', 'sex'], ids: ['gender', 'sex'], autocomplete: ['sex'], placeholders: ['gender', 'jenis kelamin'] },\n  db: {\n    names: ['birthday', 'birthdate', 'date_of_birth', 'dob', 'dateOfBirth', 'birth_date', 'bday'],\n    ids: ['birthday', 'birthdate', 'dob', 'date-of-birth'],\n    autocomplete: ['bday'],\n    placeholders: ['birthday', 'date of birth', 'tanggal lahir'],\n  },\n};\n\n// \u2500\u2500 Source priority \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nconst sourcePriority: Record<CaptureSource, number> = {\n  explicit: 100, identify: 90, form: 80, form_prefill: 70,\n  url: 60, dataLayer: 50, customDataLayer: 50, metatag: 30,\n};\n\n// \u2500\u2500 Mapping tables \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nconst dataLayerFieldMap: Record<string, MetaPiiField> = {\n  email: 'em', em: 'em', user_email: 'em', customerEmail: 'em',\n  phone: 'ph', ph: 'ph', telephone: 'ph', mobile: 'ph', phoneNumber: 'ph',\n  first_name: 'fn', fn: 'fn', firstName: 'fn', givenName: 'fn',\n  last_name: 'ln', ln: 'ln', lastName: 'ln', familyName: 'ln', surname: 'ln',\n  gender: 'ge', ge: 'ge', sex: 'ge',\n  date_of_birth: 'db', db: 'db', birthday: 'db', dob: 'db', birthdate: 'db',\n  city: 'ct', ct: 'ct', town: 'ct',\n  state: 'st', st: 'st', province: 'st', region: 'st',\n  zip: 'zp', zp: 'zp', zipcode: 'zp', postal_code: 'zp', postcode: 'zp',\n  country: 'country', country_code: 'country', countryCode: 'country',\n  external_id: 'external_id', user_id: 'external_id', userId: 'external_id',\n  customer_id: 'external_id', customerId: 'external_id',\n};\n\nconst aliasMap: Record<string, MetaPiiField> = {\n  email: 'em', phone: 'ph', first_name: 'fn', last_name: 'ln',\n  gender: 'ge', date_of_birth: 'db', city: 'ct', state: 'st',\n  zip: 'zp', zipcode: 'zp', postal_code: 'zp',\n};\n\nconst storageMap: Partial<Record<MetaPiiField, string>> = {\n  em: '_mt_em', ph: '_mt_ph', external_id: '_mt_eid',\n  fn: '_mt_fn', ln: '_mt_ln', ct: '_mt_ct', st: '_mt_st',\n  zp: '_mt_zp', country: '_mt_country',\n};\n\n// \u2500\u2500 PII field list \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nconst PII_FIELDS: MetaPiiField[] = ['em', 'ph', 'fn', 'ln', 'ge', 'db', 'ct', 'st', 'zp', 'country', 'external_id'];\nconst NON_PII_FIELDS = ['client_ip_address', 'client_user_agent', 'fbc', 'fbp', 'subscription_id', 'fb_login_id', 'lead_id'] as const;\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// \u2500\u2500 EXPORTED MODULE\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nexport const AdvancedMatching = {\n\n  // \u2500\u2500 Lifecycle \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  init(): void {\n    if (!config.advancedMatching.enabled) return;\n    log('AdvancedMatching: initializing');\n    if (config.advancedMatching.captureUrlParams) this.captureFromUrl();\n    if (config.advancedMatching.captureMetaTags) this.captureFromMetaTags();\n    if (config.advancedMatching.captureDataLayer) this.captureFromDataLayer();\n    if (config.advancedMatching.autoCaptureForms) this.watchForms();\n    log('AdvancedMatching: ready, captured:', Object.keys(capturedData));\n  },\n\n  // \u2500\u2500 Normalize + Hash \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  normalize(field: string, value: string): string | null {\n    if (isHashed(value)) return value;\n    const fn = normalizers[field];\n    return fn ? fn(value) : (value ? String(value).trim().toLowerCase() : null);\n  },\n\n  async normalizeAndHash(userData: RawUserData): Promise<HashedUserData> {\n    if (!userData) return {};\n    const result: HashedUserData = {};\n\n    for (const field of PII_FIELDS) {\n      const value = (userData as Record<string, string | undefined>)[field];\n      if (!value) continue;\n      if (isHashed(value)) { result[field] = value; continue; }\n      const normalized = this.normalize(field, value);\n      if (!normalized) continue;\n      result[field] = config.hashPii ? (await sha256(normalized) ?? undefined) : normalized;\n    }\n\n    for (const field of NON_PII_FIELDS) {\n      if ((userData as Record<string, string | undefined>)[field]) {\n        result[field] = (userData as Record<string, string | undefined>)[field];\n      }\n    }\n    return result;\n  },\n\n  // \u2500\u2500 Form Auto-Capture \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  detectFieldParam(input: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement): string | null {\n    const type = (input.type || '').toLowerCase();\n    const name = (input.name || '').toLowerCase();\n    const id = (input.id || '').toLowerCase();\n    const ac = (input.autocomplete || '').toLowerCase();\n    const ph = ('placeholder' in input ? (input.placeholder || '') : '').toLowerCase();\n\n    // Custom map first\n    for (const [sel, param] of Object.entries(config.advancedMatching.formFieldMap ?? {})) {\n      try { if (input.matches(sel)) return param; } catch { /* */ }\n    }\n\n    for (const [param, p] of Object.entries(fieldPatterns)) {\n      if (p.types?.includes(type)) return param;\n      if (p.names?.some((n) => name.includes(n))) return param;\n      if (p.ids?.some((i) => id.includes(i))) return param;\n      if (p.autocomplete?.includes(ac)) return param;\n      if (p.placeholders?.some((x) => ph.includes(x))) return param;\n    }\n\n    if (['name', 'full_name', 'fullname', 'customer_name'].includes(name) ||\n        ['name', 'full-name', 'fullname'].includes(id)) return '_fullname';\n\n    return null;\n  },\n\n  scanForm(form: HTMLFormElement): RawUserData {\n    const data: Record<string, string> = {};\n    const inputs = form.querySelectorAll<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>('input, select, textarea');\n    for (const input of inputs) {\n      if (['hidden', 'password', 'submit'].includes((input as HTMLInputElement).type)) continue;\n      const value = input.value?.trim();\n      if (!value) continue;\n      const param = this.detectFieldParam(input);\n      if (!param) continue;\n      if (param === '_fullname') {\n        const parts = value.split(/\\s+/);\n        if (parts.length >= 2) { data.fn = data.fn || parts[0]; data.ln = data.ln || parts.slice(1).join(' '); }\n        else { data.fn = data.fn || value; }\n      } else { data[param] = data[param] || value; }\n    }\n    return data as RawUserData;\n  },\n\n  watchForms(): void {\n    document.addEventListener('submit', (e: Event) => {\n      const form = e.target;\n      if (!(form instanceof HTMLFormElement)) return;\n      const data = this.scanForm(form);\n      if (Object.keys(data).length) {\n        this._mergeCapture('form', data);\n        log('AdvancedMatching: form submit captured', Object.keys(data));\n        if (config.advancedMatching.autoIdentifyOnSubmit && (data.em || data.ph)) {\n          window.MetaTracker?.identify(data);\n        }\n      }\n    }, true);\n\n    document.addEventListener('change', (e: Event) => {\n      const input = e.target;\n      if (!(input instanceof HTMLInputElement) && !(input instanceof HTMLSelectElement)) return;\n      const value = input.value?.trim();\n      if (!value) return;\n      const param = this.detectFieldParam(input);\n      if (!param || param === '_fullname') return;\n      this._mergeCapture('form', { [param]: value } as RawUserData);\n      log('AdvancedMatching: field captured', param);\n    }, true);\n\n    // Scan existing forms and observe for new ones once DOM is ready\n    const startObserving = () => {\n      document.querySelectorAll<HTMLFormElement>('form').forEach((f) => {\n        const d = this.scanForm(f);\n        if (Object.keys(d).length) { this._mergeCapture('form_prefill', d); log('AdvancedMatching: pre-filled form scanned', Object.keys(d)); }\n      });\n\n      // Watch dynamic forms\n      if (typeof MutationObserver !== 'undefined' && document.body) {\n        const obs = new MutationObserver((muts) => {\n          for (const mut of muts) for (const node of mut.addedNodes) {\n            if (!(node instanceof HTMLElement)) continue;\n            const forms = node.tagName === 'FORM' ? [node as HTMLFormElement] : [...node.querySelectorAll<HTMLFormElement>('form')];\n            for (const f of forms) { const d = this.scanForm(f); if (Object.keys(d).length) this._mergeCapture('form_prefill', d); }\n          }\n        });\n        obs.observe(document.body, { childList: true, subtree: true });\n      }\n    };\n\n    // Defer if document.body isn't available yet (script in <head>)\n    if (document.body) {\n      startObserving();\n    } else {\n      document.addEventListener('DOMContentLoaded', startObserving);\n    }\n  },\n\n  // \u2500\u2500 URL Parameter Capture \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  captureFromUrl(): void {\n    try {\n      const params = new URL(window.location.href).searchParams;\n      const data: Record<string, string> = {};\n\n      for (const p of ['email', 'em', 'e', 'user_email', 'customer_email']) {\n        const v = params.get(p); if (v?.includes('@')) { data.em = v; break; }\n      }\n      for (const p of ['phone', 'ph', 'tel', 'mobile', 'whatsapp']) {\n        const v = params.get(p); if (v && v.replace(/\\D/g, '').length >= 7) { data.ph = v; break; }\n      }\n      const fn = params.get('first_name') ?? params.get('fn'); if (fn) data.fn = fn;\n      const ln = params.get('last_name') ?? params.get('ln'); if (ln) data.ln = ln;\n      for (const p of ['external_id', 'eid', 'user_id', 'uid', 'customer_id', 'player_id']) {\n        const v = params.get(p); if (v) { data.external_id = v; break; }\n      }\n      const cc = params.get('country') ?? params.get('cc'); if (cc) data.country = cc;\n\n      if (Object.keys(data).length) { this._mergeCapture('url', data as RawUserData); log('AdvancedMatching: URL params captured', Object.keys(data)); }\n    } catch { /* */ }\n  },\n\n  // \u2500\u2500 DataLayer Capture \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  captureFromDataLayer(): void {\n    const dlKey = config.advancedMatching.dataLayerKey || 'dataLayer';\n    const dl = window[dlKey] as unknown[] | undefined;\n\n    if (Array.isArray(dl)) {\n      for (const entry of dl) this._extractFromDataLayerEntry(entry);\n      const origPush = dl.push.bind(dl);\n      dl.push = (...args: unknown[]): number => {\n        const r = origPush(...args);\n        for (const entry of args) this._extractFromDataLayerEntry(entry);\n        return r;\n      };\n    }\n\n    const udk = config.advancedMatching.userDataKey;\n    if (udk && window[udk]) this._extractUserObject(window[udk] as Record<string, unknown>, 'customDataLayer');\n  },\n\n  _extractFromDataLayerEntry(entry: unknown): void {\n    if (!entry || typeof entry !== 'object') return;\n    const obj = entry as Record<string, unknown>;\n    for (const key of ['user', 'userData', 'user_data', 'customer', 'visitor', 'contact']) {\n      if (obj[key] && typeof obj[key] === 'object') this._extractUserObject(obj[key] as Record<string, unknown>, 'dataLayer');\n    }\n    const ecom = obj.ecommerce as Record<string, unknown> | undefined;\n    const af = (ecom?.purchase as Record<string, unknown> | undefined)?.actionField as Record<string, unknown> | undefined;\n    if (af?.email) this._mergeCapture('dataLayer', { em: af.email as string });\n    this._extractUserObject(obj, 'dataLayer');\n  },\n\n  _extractUserObject(obj: Record<string, unknown>, source: CaptureSource): void {\n    if (!obj) return;\n    const data: Record<string, string> = {};\n    for (const [key, param] of Object.entries(dataLayerFieldMap)) {\n      const val = obj[key];\n      if (val && typeof val === 'string' && val.trim()) data[param] = val.trim();\n    }\n    if (Object.keys(data).length) { this._mergeCapture(source, data as RawUserData); log('AdvancedMatching: data layer captured', Object.keys(data)); }\n  },\n\n  // \u2500\u2500 Meta Tag Capture \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  captureFromMetaTags(): void {\n    const data: Record<string, string> = {};\n\n    for (const script of document.querySelectorAll<HTMLScriptElement>('script[type=\"application/ld+json\"]')) {\n      try {\n        const j = JSON.parse(script.textContent || '') as Record<string, unknown>;\n        if (j.email) data.em = j.email as string;\n        if (j.telephone) data.ph = j.telephone as string;\n        if (j.givenName) data.fn = j.givenName as string;\n        if (j.familyName) data.ln = j.familyName as string;\n        if (j.address && typeof j.address === 'object') {\n          const a = j.address as Record<string, string>;\n          if (a.addressLocality) data.ct = a.addressLocality;\n          if (a.addressRegion) data.st = a.addressRegion;\n          if (a.postalCode) data.zp = a.postalCode;\n          if (a.addressCountry) data.country = a.addressCountry;\n        }\n      } catch { /* */ }\n    }\n\n    const meta = (prop: string) => document.querySelector<HTMLMetaElement>(`meta[property=\"${prop}\"]`)?.content;\n    if (meta('profile:email')) data.em = meta('profile:email')!;\n    if (meta('profile:first_name')) data.fn = meta('profile:first_name')!;\n    if (meta('profile:last_name')) data.ln = meta('profile:last_name')!;\n    if (meta('profile:gender')) data.ge = meta('profile:gender')!;\n\n    if (Object.keys(data).length) { this._mergeCapture('metatag', data as RawUserData); log('AdvancedMatching: meta tags captured', Object.keys(data)); }\n  },\n\n  // \u2500\u2500 Identity Graph \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  _mergeCapture(source: CaptureSource, data: RawUserData): void {\n    for (const [param, value] of Object.entries(data)) {\n      if (!value) continue;\n      const existing = capturedData[param];\n      const existingP = existing ? (sourcePriority[existing.source] ?? 0) : -1;\n      if (!existing || (sourcePriority[source] ?? 0) >= existingP) {\n        capturedData[param] = { value, source };\n      }\n    }\n  },\n\n  getCapturedData(): RawUserData {\n    const r: Record<string, string> = {};\n    for (const [p, e] of Object.entries(capturedData)) r[p] = e.value;\n    return r as RawUserData;\n  },\n\n  async buildUserData(explicitUserData: RawUserData = {}): Promise<HashedUserData> {\n    // Merge: auto-captured \u2192 stored identity \u2192 explicit (highest priority)\n    const merged: Record<string, string> = { ...this.getCapturedData() as Record<string, string> };\n\n    for (const [field, key] of Object.entries(storageMap)) {\n      if (!merged[field] && key) { const v = getFromStorage(key); if (v) merged[field] = v; }\n    }\n\n    for (const [key, value] of Object.entries(explicitUserData)) {\n      if (!value) continue;\n      merged[aliasMap[key] ?? key] = value;\n    }\n\n    const result = await this.normalizeAndHash(merged as RawUserData);\n\n    result.fbp = result.fbp || CookieKeeper.getFbp() || undefined;\n    result.fbc = result.fbc || CookieKeeper.getFbc() || undefined;\n    result.client_user_agent = result.client_user_agent || navigator.userAgent;\n\n    if (!result.external_id) {\n      const vid = CookieKeeper.getVisitorId();\n      if (vid) result.external_id = (await sha256(vid)) ?? undefined;\n    }\n\n    return result;\n  },\n\n  // \u2500\u2500 Match Quality Scoring \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  scoreMatchQuality(userData: HashedUserData): number {\n    const weights: Record<string, number> = {\n      em: 30, ph: 25, external_id: 15, fn: 5, ln: 5,\n      ct: 3, st: 2, zp: 3, country: 2, ge: 2, db: 3,\n      fbp: 5, fbc: 10, client_ip_address: 3, client_user_agent: 2,\n    };\n    let score = 0;\n    for (const [f, w] of Object.entries(weights)) {\n      if ((userData as Record<string, unknown>)[f]) score += w;\n    }\n    return Math.min(score, 100);\n  },\n\n  // \u2500\u2500 Diagnostics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  getDiagnostics(): AdvancedMatchingDiagnostics {\n    const fields: AdvancedMatchingDiagnostics['fields'] = {};\n    for (const [p, e] of Object.entries(capturedData)) {\n      fields[p] = { source: e.source, hasValue: true, isHashed: isHashed(e.value) };\n    }\n    return {\n      capturedFields: Object.keys(capturedData).length,\n      fields,\n      storedIdentity: {\n        em: !!getFromStorage('_mt_em'), ph: !!getFromStorage('_mt_ph'),\n        fn: !!getFromStorage('_mt_fn'), ln: !!getFromStorage('_mt_ln'),\n        external_id: !!getFromStorage('_mt_eid'),\n      },\n    };\n  },\n\n  resetCapturedData(): void { capturedData = {}; },\n\n  // Re-export for external use\n  aliasMap,\n  storageMap,\n};\n", "/**\n * BrowserPixel \u2014 Auto-load Meta fbevents.js and sync events for deduplication.\n */\nimport { config, log, warn } from './state';\nimport { PixelRouter } from './pixel-router';\n\nconst STANDARD_EVENTS = [\n  'PageView', 'ViewContent', 'AddToCart', 'AddPaymentInfo',\n  'AddToWishlist', 'CompleteRegistration', 'Contact', 'CustomizeProduct',\n  'Donate', 'FindLocation', 'InitiateCheckout', 'Lead', 'Purchase',\n  'Schedule', 'Search', 'StartTrial', 'SubmitApplication', 'Subscribe',\n] as const;\n\nexport const BrowserPixel = {\n  _loaded: false,\n\n  init(): void {\n    if (!config.browserPixel.enabled) return;\n    if (this._loaded) return;\n\n    if (typeof (window as any).fbq === 'function') {\n      log('BrowserPixel: fbq already present, initializing pixels');\n      this._initPixels();\n      this._loaded = true;\n      return;\n    }\n\n    log('BrowserPixel: loading fbevents.js');\n\n    const n: any = (window as any).fbq = function () {\n      n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments);\n    };\n    if (!(window as any)._fbq) (window as any)._fbq = n;\n    n.push = n;\n    n.loaded = true;\n    n.version = '2.0';\n    n.queue = [] as any[];\n\n    const script = document.createElement('script');\n    script.async = true;\n    script.src = 'https://connect.facebook.net/en_US/fbevents.js';\n    const firstScript = document.getElementsByTagName('script')[0];\n    if (firstScript && firstScript.parentNode) {\n      firstScript.parentNode.insertBefore(script, firstScript);\n    } else {\n      const insert = () => {\n        const s = document.getElementsByTagName('script')[0];\n        if (s && s.parentNode) s.parentNode.insertBefore(script, s);\n        else document.head.appendChild(script);\n      };\n      if (document.body) insert();\n      else document.addEventListener('DOMContentLoaded', insert);\n    }\n\n    this._initPixels();\n    this._loaded = true;\n  },\n\n  _initPixels(): void {\n    const pixelIds = PixelRouter.getAllPixelIds();\n    if (!pixelIds.length) { warn('BrowserPixel: no pixel IDs configured'); return; }\n\n    for (const pid of pixelIds) {\n      (window as any).fbq('init', pid);\n      log('BrowserPixel: init pixel', pid);\n    }\n\n    if (config.browserPixel.autoPageView) {\n      (window as any).fbq('track', 'PageView');\n      log('BrowserPixel: PageView fired');\n    }\n  },\n\n  trackEvent(eventName: string, eventId: string, customData: Record<string, unknown> = {}): void {\n    if (!config.browserPixel.enabled || !config.browserPixel.syncEvents) return;\n    if (typeof (window as any).fbq !== 'function') return;\n\n    const isStandard = (STANDARD_EVENTS as readonly string[]).includes(eventName);\n    const fbqParams = { ...customData };\n    const fbqOptions = { eventID: eventId };\n\n    if (isStandard) {\n      (window as any).fbq('track', eventName, fbqParams, fbqOptions);\n    } else {\n      (window as any).fbq('trackCustom', eventName, fbqParams, fbqOptions);\n    }\n\n    log('BrowserPixel: synced', eventName, 'eventID:', eventId);\n  },\n};\n", "/**\n * GTM Integration \u2014 DataLayer bridge for Google Tag Manager.\n *\n * Automatically maps GA4/Enhanced Ecommerce dataLayer events to Meta CAPI\n * events, and optionally pushes MetaTracker events back to the dataLayer\n * for other GTM tags to consume.\n *\n * Supported GA4 ecommerce events:\n *   - page_view       \u2192 PageView\n *   - view_item       \u2192 ViewContent\n *   - add_to_cart     \u2192 AddToCart\n *   - remove_from_cart (logged only)\n *   - add_to_wishlist \u2192 AddToWishlist\n *   - begin_checkout  \u2192 InitiateCheckout\n *   - add_payment_info \u2192 AddPaymentInfo\n *   - purchase        \u2192 Purchase\n *   - sign_up         \u2192 CompleteRegistration\n *   - generate_lead   \u2192 Lead\n *   - search          \u2192 Search\n *   - view_item_list  \u2192 ViewContent\n *   - select_item     \u2192 ViewContent\n */\n\nimport { config, log, warn } from './state';\nimport type { CustomData, RawUserData, GtmConfig } from './types';\n\n// \u2500\u2500 GA4 \u2192 Meta event mapping \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nconst GA4_EVENT_MAP: Record<string, string> = {\n  page_view: 'PageView',\n  view_item: 'ViewContent',\n  view_item_list: 'ViewContent',\n  select_item: 'ViewContent',\n  add_to_cart: 'AddToCart',\n  add_to_wishlist: 'AddToWishlist',\n  begin_checkout: 'InitiateCheckout',\n  add_payment_info: 'AddPaymentInfo',\n  purchase: 'Purchase',\n  refund: '', // skip\n  remove_from_cart: '', // skip\n  sign_up: 'CompleteRegistration',\n  generate_lead: 'Lead',\n  search: 'Search',\n  login: '', // skip \u2014 no direct Meta equivalent\n  view_cart: 'ViewContent',\n  add_shipping_info: 'AddPaymentInfo',\n  select_promotion: 'ViewContent',\n};\n\n// \u2500\u2500 Ecommerce data extraction \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\ninterface GA4Item {\n  item_id?: string;\n  item_name?: string;\n  item_category?: string;\n  price?: number;\n  quantity?: number;\n  [key: string]: unknown;\n}\n\ninterface GA4EcommerceData {\n  items?: GA4Item[];\n  value?: number;\n  currency?: string;\n  transaction_id?: string;\n  shipping?: number;\n  tax?: number;\n  coupon?: string;\n  search_term?: string;\n  [key: string]: unknown;\n}\n\nfunction extractCustomData(eventName: string, ecommerce: GA4EcommerceData | undefined, dlEntry: Record<string, unknown>): CustomData {\n  const cd: CustomData = {};\n\n  const ecom = ecommerce ?? {};\n\n  // Value & currency\n  if (ecom.value !== undefined) cd.value = Number(ecom.value);\n  if (ecom.currency) cd.currency = String(ecom.currency);\n\n  // Transaction / order ID\n  if (ecom.transaction_id) cd.order_id = String(ecom.transaction_id);\n\n  // Search\n  if (ecom.search_term) cd.search_string = String(ecom.search_term);\n  if (dlEntry.search_term) cd.search_string = String(dlEntry.search_term);\n\n  // Items \u2192 content_ids, contents, num_items, content_type\n  if (Array.isArray(ecom.items) && ecom.items.length) {\n    cd.content_ids = ecom.items\n      .map((item) => item.item_id ?? item.item_name ?? '')\n      .filter(Boolean);\n\n    cd.contents = ecom.items.map((item) => ({\n      id: String(item.item_id ?? item.item_name ?? ''),\n      quantity: item.quantity ?? 1,\n      item_price: item.price,\n    }));\n\n    cd.num_items = ecom.items.reduce((sum, item) => sum + (item.quantity ?? 1), 0);\n\n    // Infer content_type\n    cd.content_type = 'product';\n\n    // Content name from first item\n    if (ecom.items[0]?.item_name) cd.content_name = ecom.items[0].item_name;\n\n    // Category from first item\n    if (ecom.items[0]?.item_category) cd.content_category = ecom.items[0].item_category;\n  }\n\n  // Fallback value from items if not set\n  if (cd.value === undefined && cd.contents?.length) {\n    cd.value = cd.contents.reduce(\n      (sum, c) => sum + ((c.item_price ?? 0) * (c.quantity ?? 1)), 0,\n    );\n  }\n\n  return cd;\n}\n\nfunction extractUserData(dlEntry: Record<string, unknown>): RawUserData {\n  const ud: Record<string, string> = {};\n\n  // Look for user data in common dataLayer patterns\n  const userKeys = ['user', 'userData', 'user_data', 'customer', 'visitor', 'contact'];\n  for (const key of userKeys) {\n    if (dlEntry[key] && typeof dlEntry[key] === 'object') {\n      const obj = dlEntry[key] as Record<string, unknown>;\n      if (obj.email || obj.em) ud.em = String(obj.email ?? obj.em);\n      if (obj.phone || obj.ph) ud.ph = String(obj.phone ?? obj.ph);\n      if (obj.first_name || obj.fn || obj.firstName) ud.fn = String(obj.first_name ?? obj.fn ?? obj.firstName);\n      if (obj.last_name || obj.ln || obj.lastName) ud.ln = String(obj.last_name ?? obj.ln ?? obj.lastName);\n      if (obj.external_id || obj.user_id || obj.userId) ud.external_id = String(obj.external_id ?? obj.user_id ?? obj.userId);\n      if (obj.city || obj.ct) ud.ct = String(obj.city ?? obj.ct);\n      if (obj.state || obj.st) ud.st = String(obj.state ?? obj.st);\n      if (obj.zip || obj.zp || obj.postal_code) ud.zp = String(obj.zip ?? obj.zp ?? obj.postal_code);\n      if (obj.country || obj.country_code) ud.country = String(obj.country ?? obj.country_code);\n    }\n  }\n\n  // Also check top-level user fields (some implementations put them directly)\n  if (dlEntry.user_id) ud.external_id = ud.external_id || String(dlEntry.user_id);\n  if (dlEntry.userId) ud.external_id = ud.external_id || String(dlEntry.userId);\n\n  return ud as RawUserData;\n}\n\n// \u2500\u2500 Module state \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nlet _initialized = false;\nlet _originalPush: ((...args: unknown[]) => number) | null = null;\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// \u2500\u2500 EXPORTED MODULE\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nexport const GtmIntegration = {\n\n  init(): void {\n    if (!config.gtm.enabled) return;\n    if (_initialized) return;\n\n    try {\n      log('GTM: initializing dataLayer bridge');\n\n      const dlKey = config.gtm.dataLayerKey || 'dataLayer';\n      const dl = window[dlKey] as unknown[] | undefined;\n\n      if (!Array.isArray(dl)) {\n        // Create dataLayer if it doesn't exist\n        (window as Record<string, unknown>)[dlKey] = [];\n        log('GTM: created', dlKey);\n      }\n\n      const dataLayer = (window as Record<string, unknown>)[dlKey] as unknown[];\n\n      // Process existing entries\n      if (config.gtm.autoMapEcommerce) {\n        for (const entry of dataLayer) {\n          try {\n            this._processEntry(entry);\n          } catch (err) {\n            warn('GTM: error processing existing dataLayer entry', err);\n          }\n        }\n      }\n\n      // Intercept future pushes\n      _originalPush = dataLayer.push.bind(dataLayer);\n      dataLayer.push = (...args: unknown[]): number => {\n        const result = _originalPush!(...args);\n        if (config.gtm.autoMapEcommerce) {\n          for (const entry of args) {\n            try {\n              this._processEntry(entry);\n            } catch (err) {\n              warn('GTM: error processing dataLayer push', err);\n            }\n          }\n        }\n        return result;\n      };\n\n      _initialized = true;\n      log('GTM: dataLayer bridge active');\n    } catch (err) {\n      warn('GTM: failed to initialize dataLayer bridge', err);\n    }\n  },\n\n  /**\n   * Process a single dataLayer entry and fire the corresponding Meta event.\n   */\n  _processEntry(entry: unknown): void {\n    if (!entry || typeof entry !== 'object') return;\n\n    const obj = entry as Record<string, unknown>;\n    const event = obj.event as string | undefined;\n    if (!event || typeof event !== 'string') return;\n\n    // Skip internal GTM events and our own events to prevent loops\n    if (event.startsWith('gtm.')) return;\n    if (obj._source === 'meta-capi-tracker') return;\n\n    // Resolve Meta event name\n    const metaEvent = this._resolveEventName(event);\n    if (!metaEvent) return;\n\n    // Extract ecommerce and user data with defensive error handling\n    let customData: CustomData = {};\n    let userData: RawUserData = {};\n\n    try {\n      const ecommerce = obj.ecommerce as GA4EcommerceData | undefined;\n      customData = extractCustomData(event, ecommerce, obj);\n      userData = extractUserData(obj);\n    } catch (err) {\n      warn('GTM: error extracting data from dataLayer entry', event, err);\n      return;\n    }\n\n    log('GTM: mapping', event, '\u2192', metaEvent);\n\n    // Fire MetaTracker event (without re-pushing to dataLayer to avoid loops)\n    if (window.MetaTracker && typeof window.MetaTracker.track === 'function') {\n      window.MetaTracker.track(metaEvent, customData, userData).catch((err: unknown) => {\n        warn('GTM: failed to track mapped event', metaEvent, err);\n      });\n    }\n  },\n\n  /**\n   * Resolve a dataLayer event name to a Meta CAPI event name.\n   */\n  _resolveEventName(dlEvent: string): string | null {\n    // Custom mapping takes priority\n    const custom = config.gtm.eventMapping[dlEvent];\n    if (custom) return custom;\n\n    // Built-in GA4 mapping\n    const mapped = GA4_EVENT_MAP[dlEvent];\n    if (mapped !== undefined) return mapped || null; // empty string = skip\n\n    return null; // Unknown event \u2014 don't map\n  },\n\n  /**\n   * Push an event to the GTM dataLayer.\n   */\n  pushToDataLayer(event: string, data: Record<string, unknown> = {}): void {\n    try {\n      const dlKey = config.gtm.dataLayerKey || 'dataLayer';\n      const dl = window[dlKey] as unknown[] | undefined;\n\n      if (!Array.isArray(dl)) {\n        warn('GTM: dataLayer not found, cannot push event');\n        return;\n      }\n\n      // Use the original push to avoid our interceptor re-processing this event\n      const pushFn = _originalPush ?? dl.push.bind(dl);\n\n      pushFn({\n        event,\n        ...data,\n        _source: 'meta-capi-tracker',\n      });\n\n      log('GTM: pushed to dataLayer:', event);\n    } catch (err) {\n      warn('GTM: error pushing to dataLayer', event, err);\n    }\n  },\n\n  /**\n   * Push a MetaTracker event result to the dataLayer for other GTM tags.\n   */\n  notifyDataLayer(eventName: string, eventId: string | undefined, customData: CustomData = {}): void {\n    if (!config.gtm.enabled || !config.gtm.pushToDataLayer) return;\n\n    try {\n      this.pushToDataLayer('meta_capi_event', {\n        meta_event_name: eventName,\n        meta_event_id: eventId,\n        meta_custom_data: customData,\n      });\n    } catch (err) {\n      warn('GTM: error notifying dataLayer', eventName, err);\n    }\n  },\n\n  isInitialized(): boolean {\n    return _initialized;\n  },\n};\n", "/**\n * Meta CAPI Tracker \u2014 Client-Side Library v3.0 (TypeScript)\n * ==========================================================\n *\n * Usage:\n *   MetaTracker.init({\n *     endpoint: 'https://your-server.com/api/v1/track',\n *     apiKey: 'your-api-key',\n *     pixelId: '123456789',\n *   });\n */\n\nimport {\n  VERSION, MAX_QUEUE_SIZE, BATCH_INTERVAL,\n  config, queue, batchTimer, initialized,\n  transportMethod, adBlockDetected,\n  mergeConfig, setInitialized, setBatchTimer,\n  log, warn,\n} from './state';\nimport { generateEventId, saveToStorage, removeFromStorage } from './utils';\nimport { transportSend, resolveEndpoint } from './transport';\nimport { CookieKeeper } from './cookie-keeper';\nimport { AdBlockRecovery } from './ad-block-recovery';\nimport { PixelRouter } from './pixel-router';\nimport { AdvancedMatching } from './advanced-matching';\nimport { BrowserPixel } from './browser-pixel';\nimport { GtmIntegration } from './gtm';\nimport type {\n  TrackerInitOptions, MetaEventName, CustomData, RawUserData,\n  TrackOptions, TrackingEvent, MetaTrackerAPI, CaptureSource,\n  MatchQualityResult, DebugInfo, HashedUserData,\n} from './types';\n\n// \u2500\u2500 Core Queue \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nasync function sendEvents(events: TrackingEvent[]): Promise<void> {\n  if (!events.length) return;\n  const url = events.length === 1 ? resolveEndpoint('/event') : resolveEndpoint('/batch');\n  const body = events.length === 1 ? events[0] : { events };\n  try { await transportSend(url, body); } catch (e) { warn('Send failed:', e); }\n}\n\nfunction flushQueue(): void {\n  if (!queue.length) return;\n  sendEvents(queue.splice(0, MAX_QUEUE_SIZE));\n}\n\nfunction enqueueEvent(event: TrackingEvent): void {\n  queue.push(event);\n  if (config.batchEvents) {\n    if (batchTimer) clearTimeout(batchTimer);\n    setBatchTimer(setTimeout(flushQueue, BATCH_INTERVAL));\n  } else { flushQueue(); }\n}\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// \u2500\u2500 PUBLIC API\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nconst MetaTracker: MetaTrackerAPI = {\n  VERSION,\n\n  async init(options: TrackerInitOptions): Promise<MetaTrackerAPI> {\n    if (initialized) { warn('Already initialized'); return this; }\n    if (!options.endpoint || !options.apiKey) { warn('Missing: endpoint, apiKey'); return this; }\n    if (!('pixelId' in options && options.pixelId) && !('pixels' in options && options.pixels?.length)) {\n      warn('Missing: pixelId or pixels[]'); return this;\n    }\n    if (options.respectDnt && (navigator.doNotTrack === '1' || window.doNotTrack === '1')) return this;\n\n    mergeConfig(options);\n    setInitialized(true);\n    log('Initialized v' + VERSION);\n\n    CookieKeeper.init();\n    AdvancedMatching.init();\n    BrowserPixel.init();\n    GtmIntegration.init();\n\n    if (config.adBlockRecovery.enabled) {\n      AdBlockRecovery.detect().then((blocked: boolean) => { if (blocked) log('Ad blocker recovery: ACTIVE'); });\n    }\n\n    if (config.autoPageView) this.trackPageView();\n\n    window.addEventListener('visibilitychange', () => { if (document.visibilityState === 'hidden') flushQueue(); });\n    window.addEventListener('beforeunload', flushQueue);\n    return this;\n  },\n\n  async track(\n    eventName: MetaEventName, customData: CustomData = {},\n    userData: RawUserData = {}, options: TrackOptions = {},\n  ): Promise<string | undefined> {\n    if (!initialized) { warn('Not initialized'); return undefined; }\n\n    const eventId = options.event_id ?? generateEventId();\n\n    const enrichedUserData: HashedUserData = config.advancedMatching.enabled\n      ? await AdvancedMatching.buildUserData(userData)\n      : await AdvancedMatching.normalizeAndHash(userData);\n\n    const matchScore = AdvancedMatching.scoreMatchQuality(enrichedUserData);\n    log(`Match quality: ${matchScore}/100`);\n\n    if (matchScore < config.minMatchQuality) {\n      warn(`Match quality ${matchScore} below threshold ${config.minMatchQuality}, skipping event`);\n      return undefined;\n    }\n\n    const pixelIds = options.pixel_id ? [options.pixel_id] : PixelRouter.resolve();\n    if (!pixelIds.length) { warn('No pixel for:', window.location.hostname); return undefined; }\n\n    for (const pixelId of pixelIds) {\n      const event: TrackingEvent = {\n        pixel_id: pixelId,\n        event_name: eventName,\n        event_id: pixelIds.length > 1 ? `${eventId}_${pixelId.slice(-4)}` : eventId,\n        event_time: Math.floor(Date.now() / 1000),\n        event_source_url: window.location.href,\n        action_source: options.action_source ?? 'website',\n        user_data: { ...enrichedUserData },\n        match_quality: matchScore,\n        visitor_id: CookieKeeper.getVisitorId() ?? null,\n      };\n      if (Object.keys(customData).length) event.custom_data = customData;\n      log('Track:', eventName, '\u2192', pixelId, `(match: ${matchScore})`);\n      enqueueEvent(event);\n      BrowserPixel.trackEvent(eventName, event.event_id, customData);\n    }\n\n    GtmIntegration.notifyDataLayer(eventName, eventId, customData);\n\n    return eventId;\n  },\n\n  // \u2500\u2500 Convenience methods \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  trackPageView(ud: RawUserData = {}) { return this.track('PageView', {}, ud); },\n  trackViewContent(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('ViewContent', cd, ud); },\n  trackAddToCart(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('AddToCart', cd, ud); },\n  trackPurchase(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('Purchase', cd, ud); },\n  trackLead(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('Lead', cd, ud); },\n  trackCompleteRegistration(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('CompleteRegistration', cd, ud); },\n  trackInitiateCheckout(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('InitiateCheckout', cd, ud); },\n  trackSearch(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('Search', cd, ud); },\n  trackAddToWishlist(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('AddToWishlist', cd, ud); },\n  trackAddPaymentInfo(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('AddPaymentInfo', cd, ud); },\n  trackContact(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('Contact', cd, ud); },\n  trackCustomizeProduct(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('CustomizeProduct', cd, ud); },\n  trackDonate(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('Donate', cd, ud); },\n  trackFindLocation(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('FindLocation', cd, ud); },\n  trackSchedule(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('Schedule', cd, ud); },\n  trackStartTrial(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('StartTrial', cd, ud); },\n  trackSubmitApplication(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('SubmitApplication', cd, ud); },\n  trackSubscribe(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('Subscribe', cd, ud); },\n  trackToPixel(pixelId: string, name: MetaEventName, cd: CustomData = {}, ud: RawUserData = {}) {\n    return this.track(name, cd, ud, { pixel_id: pixelId });\n  },\n\n  // \u2500\u2500 Identity \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  async identify(userData: RawUserData = {}): Promise<void> {\n    if (!initialized) { warn('Not initialized'); return; }\n\n    const normalized: Record<string, string> = {};\n    for (const [key, value] of Object.entries(userData)) {\n      if (!value) continue;\n      normalized[AdvancedMatching.aliasMap[key] ?? key] = value;\n    }\n\n    const hashed = await AdvancedMatching.normalizeAndHash(normalized as RawUserData);\n\n    for (const [field, storageKey] of Object.entries(AdvancedMatching.storageMap)) {\n      const val = (hashed as Record<string, string | undefined>)[field];\n      if (val && storageKey) saveToStorage(storageKey, val, config.cookieKeeper.maxAge);\n    }\n\n    AdvancedMatching._mergeCapture('identify', normalized as RawUserData);\n    log('Identify:', Object.keys(hashed).filter(\n      (k) => (hashed as Record<string, unknown>)[k] && !['client_user_agent', 'fbp', 'fbc'].includes(k),\n    ));\n    CookieKeeper.syncToServer();\n  },\n\n  clearIdentity(): void {\n    ['_mt_em', '_mt_ph', '_mt_fn', '_mt_ln', '_mt_eid', '_mt_ct', '_mt_st', '_mt_zp', '_mt_country']\n      .forEach(removeFromStorage);\n    AdvancedMatching.resetCapturedData();\n    log('Identity cleared');\n  },\n\n  // \u2500\u2500 Multi-domain \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  addPixel(pixelId: string, domains: string | string[]): void {\n    config.pixels.push({ pixelId, domains: Array.isArray(domains) ? domains : [domains] });\n  },\n  removePixel(pixelId: string): void {\n    config.pixels = config.pixels.filter((p) => p.pixelId !== pixelId);\n  },\n\n  // \u2500\u2500 Cookie Keeper \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  refreshCookies(): void { CookieKeeper.refreshCookies(); },\n\n  // \u2500\u2500 Diagnostics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  flush(): void { flushQueue(); },\n  isAdBlocked(): boolean { return adBlockDetected; },\n  getTransport(): string { return transportMethod; },\n\n  getDebugInfo(): DebugInfo {\n    return {\n      version: VERSION, initialized, transport: transportMethod, adBlockDetected,\n      config: { endpoint: config.endpoint, pixelId: config.pixelId, pixelCount: config.pixels.length },\n      cookies: { fbp: CookieKeeper.getFbp(), fbc: CookieKeeper.getFbc(), visitorId: CookieKeeper.getVisitorId() },\n      routing: { domain: window.location.hostname, active: PixelRouter.resolve(), all: PixelRouter.getAllPixelIds() },\n      advancedMatching: AdvancedMatching.getDiagnostics(),\n      queueSize: queue.length,\n    };\n  },\n\n  async getMatchQuality(extraUserData: RawUserData = {}): Promise<MatchQualityResult> {\n    const ud = config.advancedMatching.enabled\n      ? await AdvancedMatching.buildUserData(extraUserData)\n      : await AdvancedMatching.normalizeAndHash(extraUserData);\n    return {\n      score: AdvancedMatching.scoreMatchQuality(ud),\n      fields: Object.keys(ud).filter((k) => (ud as Record<string, unknown>)[k]),\n    };\n  },\n\n  addUserData(data: RawUserData, source: CaptureSource = 'explicit'): void {\n    AdvancedMatching._mergeCapture(source, data);\n  },\n\n  // \u2500\u2500 GTM Integration \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  pushToDataLayer(event: string, data: Record<string, unknown> = {}): void {\n    GtmIntegration.pushToDataLayer(event, data);\n  },\n};\n\n// \u2500\u2500 Expose globally \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nwindow.MetaTracker = MetaTracker;\n\nif (window.MetaTrackerQueue && Array.isArray(window.MetaTrackerQueue)) {\n  for (const [method, ...args] of window.MetaTrackerQueue) {\n    const fn = (MetaTracker as unknown as Record<string, (...a: unknown[]) => unknown>)[method];\n    if (typeof fn === 'function') fn.apply(MetaTracker, args);\n  }\n}\n\nexport { MetaTracker };\nexport default MetaTracker;\n\n// Re-export types for consumers\nexport type {\n  TrackerConfig, TrackerInitOptions, MetaEventName, MetaStandardEvent,\n  CustomData, RawUserData, HashedUserData, TrackOptions, TrackingEvent,\n  MetaTrackerAPI, PixelConfig, CookieKeeperConfig, AdBlockRecoveryConfig,\n  AdvancedMatchingConfig, BrowserPixelConfig, GtmConfig,\n  CaptureSource, MatchQualityResult, DebugInfo,\n} from './types';\n"],
  "mappings": "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",
  "names": []
}
