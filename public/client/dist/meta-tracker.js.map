{
  "version": 3,
  "sources": ["../src/index.ts", "../src/state.ts", "../src/utils.ts", "../src/ad-block-recovery.ts", "../src/transport.ts", "../src/cookie-keeper.ts", "../src/pixel-router.ts", "../src/advanced-matching.ts", "../src/browser-pixel.ts", "../src/gtm.ts"],
  "sourcesContent": ["/**\n * Meta CAPI Tracker \u2014 Client-Side Library v3.0 (TypeScript)\n * ==========================================================\n *\n * Usage:\n *   MetaTracker.init({\n *     endpoint: 'https://your-server.com/api/v1/track',\n *     apiKey: 'your-api-key',\n *     pixelId: '123456789',\n *   });\n */\n\nimport {\n  VERSION, MAX_QUEUE_SIZE, BATCH_INTERVAL,\n  config, queue, batchTimer, initialized,\n  transportMethod, adBlockDetected,\n  mergeConfig, setInitialized, setBatchTimer,\n  log, warn,\n} from './state';\nimport { generateEventId, saveToStorage, removeFromStorage } from './utils';\nimport { transportSend, resolveEndpoint } from './transport';\nimport { CookieKeeper } from './cookie-keeper';\nimport { AdBlockRecovery } from './ad-block-recovery';\nimport { PixelRouter } from './pixel-router';\nimport { AdvancedMatching } from './advanced-matching';\nimport { BrowserPixel } from './browser-pixel';\nimport { GtmIntegration } from './gtm';\nimport type {\n  TrackerInitOptions, MetaEventName, CustomData, RawUserData,\n  TrackOptions, TrackingEvent, MetaTrackerAPI, CaptureSource,\n  MatchQualityResult, DebugInfo, HashedUserData,\n} from './types';\n\n// \u2500\u2500 Core Queue \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nasync function sendEvents(events: TrackingEvent[]): Promise<void> {\n  if (!events.length) return;\n  const url = events.length === 1 ? resolveEndpoint('/event') : resolveEndpoint('/batch');\n  const body = events.length === 1 ? events[0] : { events };\n  try { await transportSend(url, body); } catch (e) { warn('Send failed:', e); }\n}\n\nfunction flushQueue(): void {\n  if (!queue.length) return;\n  sendEvents(queue.splice(0, MAX_QUEUE_SIZE));\n}\n\nfunction enqueueEvent(event: TrackingEvent): void {\n  queue.push(event);\n  if (config.batchEvents) {\n    if (batchTimer) clearTimeout(batchTimer);\n    setBatchTimer(setTimeout(flushQueue, BATCH_INTERVAL));\n  } else { flushQueue(); }\n}\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// \u2500\u2500 PUBLIC API\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nconst MetaTracker: MetaTrackerAPI = {\n  VERSION,\n\n  async init(options: TrackerInitOptions): Promise<MetaTrackerAPI> {\n    if (initialized) { warn('Already initialized'); return this; }\n    if (!options.endpoint || !options.apiKey) { warn('Missing: endpoint, apiKey'); return this; }\n    if (!('pixelId' in options && options.pixelId) && !('pixels' in options && options.pixels?.length)) {\n      warn('Missing: pixelId or pixels[]'); return this;\n    }\n    if (options.respectDnt && (navigator.doNotTrack === '1' || window.doNotTrack === '1')) return this;\n\n    mergeConfig(options);\n    setInitialized(true);\n    log('Initialized v' + VERSION);\n\n    CookieKeeper.init();\n    AdvancedMatching.init();\n    BrowserPixel.init();\n    GtmIntegration.init();\n\n    if (config.adBlockRecovery.enabled) {\n      AdBlockRecovery.detect().then((blocked: boolean) => { if (blocked) log('Ad blocker recovery: ACTIVE'); });\n    }\n\n    if (config.autoPageView) this.trackPageView();\n\n    window.addEventListener('visibilitychange', () => { if (document.visibilityState === 'hidden') flushQueue(); });\n    window.addEventListener('beforeunload', flushQueue);\n    return this;\n  },\n\n  async track(\n    eventName: MetaEventName, customData: CustomData = {},\n    userData: RawUserData = {}, options: TrackOptions = {},\n  ): Promise<string | undefined> {\n    if (!initialized) { warn('Not initialized'); return undefined; }\n\n    const eventId = options.event_id ?? generateEventId();\n\n    const enrichedUserData: HashedUserData = config.advancedMatching.enabled\n      ? await AdvancedMatching.buildUserData(userData)\n      : await AdvancedMatching.normalizeAndHash(userData);\n\n    const matchScore = AdvancedMatching.scoreMatchQuality(enrichedUserData);\n    log(`Match quality: ${matchScore}/100`);\n\n    if (matchScore < config.minMatchQuality) {\n      warn(`Match quality ${matchScore} below threshold ${config.minMatchQuality}, skipping event`);\n      return undefined;\n    }\n\n    const pixelIds = options.pixel_id ? [options.pixel_id] : PixelRouter.resolve();\n    if (!pixelIds.length) { warn('No pixel for:', window.location.hostname); return undefined; }\n\n    for (const pixelId of pixelIds) {\n      const event: TrackingEvent = {\n        pixel_id: pixelId,\n        event_name: eventName,\n        event_id: pixelIds.length > 1 ? `${eventId}_${pixelId.slice(-4)}` : eventId,\n        event_time: Math.floor(Date.now() / 1000),\n        event_source_url: window.location.href,\n        action_source: options.action_source ?? 'website',\n        user_data: { ...enrichedUserData },\n        match_quality: matchScore,\n        visitor_id: CookieKeeper.getVisitorId() ?? null,\n      };\n      if (Object.keys(customData).length) event.custom_data = customData;\n      log('Track:', eventName, '\u2192', pixelId, `(match: ${matchScore})`);\n      enqueueEvent(event);\n      BrowserPixel.trackEvent(eventName, event.event_id, customData);\n    }\n\n    GtmIntegration.notifyDataLayer(eventName, eventId, customData);\n\n    return eventId;\n  },\n\n  // \u2500\u2500 Convenience methods \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  trackPageView(ud: RawUserData = {}) { return this.track('PageView', {}, ud); },\n  trackViewContent(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('ViewContent', cd, ud); },\n  trackAddToCart(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('AddToCart', cd, ud); },\n  trackPurchase(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('Purchase', cd, ud); },\n  trackLead(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('Lead', cd, ud); },\n  trackCompleteRegistration(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('CompleteRegistration', cd, ud); },\n  trackInitiateCheckout(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('InitiateCheckout', cd, ud); },\n  trackSearch(cd: CustomData = {}, ud: RawUserData = {}) { return this.track('Search', cd, ud); },\n  trackToPixel(pixelId: string, name: MetaEventName, cd: CustomData = {}, ud: RawUserData = {}) {\n    return this.track(name, cd, ud, { pixel_id: pixelId });\n  },\n\n  // \u2500\u2500 Identity \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  async identify(userData: RawUserData = {}): Promise<void> {\n    if (!initialized) { warn('Not initialized'); return; }\n\n    const normalized: Record<string, string> = {};\n    for (const [key, value] of Object.entries(userData)) {\n      if (!value) continue;\n      normalized[AdvancedMatching.aliasMap[key] ?? key] = value;\n    }\n\n    const hashed = await AdvancedMatching.normalizeAndHash(normalized as RawUserData);\n\n    for (const [field, storageKey] of Object.entries(AdvancedMatching.storageMap)) {\n      const val = (hashed as Record<string, string | undefined>)[field];\n      if (val && storageKey) saveToStorage(storageKey, val, config.cookieKeeper.maxAge);\n    }\n\n    AdvancedMatching._mergeCapture('identify', normalized as RawUserData);\n    log('Identify:', Object.keys(hashed).filter(\n      (k) => (hashed as Record<string, unknown>)[k] && !['client_user_agent', 'fbp', 'fbc'].includes(k),\n    ));\n    CookieKeeper.syncToServer();\n  },\n\n  clearIdentity(): void {\n    ['_mt_em', '_mt_ph', '_mt_fn', '_mt_ln', '_mt_eid', '_mt_ct', '_mt_st', '_mt_zp', '_mt_country']\n      .forEach(removeFromStorage);\n    AdvancedMatching.resetCapturedData();\n    log('Identity cleared');\n  },\n\n  // \u2500\u2500 Multi-domain \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  addPixel(pixelId: string, domains: string | string[]): void {\n    config.pixels.push({ pixelId, domains: Array.isArray(domains) ? domains : [domains] });\n  },\n  removePixel(pixelId: string): void {\n    config.pixels = config.pixels.filter((p) => p.pixelId !== pixelId);\n  },\n\n  // \u2500\u2500 Cookie Keeper \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  refreshCookies(): void { CookieKeeper.refreshCookies(); },\n\n  // \u2500\u2500 Diagnostics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  flush(): void { flushQueue(); },\n  isAdBlocked(): boolean { return adBlockDetected; },\n  getTransport(): string { return transportMethod; },\n\n  getDebugInfo(): DebugInfo {\n    return {\n      version: VERSION, initialized, transport: transportMethod, adBlockDetected,\n      config: { endpoint: config.endpoint, pixelId: config.pixelId, pixelCount: config.pixels.length },\n      cookies: { fbp: CookieKeeper.getFbp(), fbc: CookieKeeper.getFbc(), visitorId: CookieKeeper.getVisitorId() },\n      routing: { domain: window.location.hostname, active: PixelRouter.resolve(), all: PixelRouter.getAllPixelIds() },\n      advancedMatching: AdvancedMatching.getDiagnostics(),\n      queueSize: queue.length,\n    };\n  },\n\n  async getMatchQuality(extraUserData: RawUserData = {}): Promise<MatchQualityResult> {\n    const ud = config.advancedMatching.enabled\n      ? await AdvancedMatching.buildUserData(extraUserData)\n      : await AdvancedMatching.normalizeAndHash(extraUserData);\n    return {\n      score: AdvancedMatching.scoreMatchQuality(ud),\n      fields: Object.keys(ud).filter((k) => (ud as Record<string, unknown>)[k]),\n    };\n  },\n\n  addUserData(data: RawUserData, source: CaptureSource = 'explicit'): void {\n    AdvancedMatching._mergeCapture(source, data);\n  },\n\n  // \u2500\u2500 GTM Integration \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  pushToDataLayer(event: string, data: Record<string, unknown> = {}): void {\n    GtmIntegration.pushToDataLayer(event, data);\n  },\n};\n\n// \u2500\u2500 Expose globally \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nwindow.MetaTracker = MetaTracker;\n\nif (window.MetaTrackerQueue && Array.isArray(window.MetaTrackerQueue)) {\n  for (const [method, ...args] of window.MetaTrackerQueue) {\n    const fn = (MetaTracker as unknown as Record<string, (...a: unknown[]) => unknown>)[method];\n    if (typeof fn === 'function') fn.apply(MetaTracker, args);\n  }\n}\n\nexport { MetaTracker };\nexport default MetaTracker;\n\n// Re-export types for consumers\nexport type {\n  TrackerConfig, TrackerInitOptions, MetaEventName, MetaStandardEvent,\n  CustomData, RawUserData, HashedUserData, TrackOptions, TrackingEvent,\n  MetaTrackerAPI, PixelConfig, CookieKeeperConfig, AdBlockRecoveryConfig,\n  AdvancedMatchingConfig, BrowserPixelConfig, GtmConfig,\n  CaptureSource, MatchQualityResult, DebugInfo,\n} from './types';\n", "/**\n * Shared mutable state \u2014 centralised to avoid circular imports.\n */\nimport type { TrackerConfig, TrackingEvent } from './types';\n\nexport const VERSION = '2.1.0';\nexport const MAX_QUEUE_SIZE = 50;\nexport const RETRY_DELAYS: readonly number[] = [1000, 5000, 15000];\nexport const BATCH_INTERVAL = 2000;\n\nexport let config: TrackerConfig = {\n  endpoint: '', apiKey: '', pixelId: '', pixels: [],\n  autoPageView: true, debug: false, hashPii: true,\n  respectDnt: false, batchEvents: true, minMatchQuality: 60,\n  browserPixel: { enabled: false, autoPageView: true, syncEvents: true },\n  cookieKeeper: { enabled: true, refreshInterval: 86_400_000, maxAge: 180, cookieNames: ['_fbp', '_fbc', '_mt_id'] },\n  adBlockRecovery: { enabled: true, proxyPath: '/collect', useBeacon: true, useImage: true, customEndpoints: [] },\n  advancedMatching: {\n    enabled: true, autoCaptureForms: true, captureUrlParams: true,\n    captureDataLayer: true, captureMetaTags: true, autoIdentifyOnSubmit: true,\n    formFieldMap: {}, dataLayerKey: 'dataLayer', userDataKey: null,\n  },\n  gtm: {\n    enabled: false, autoMapEcommerce: true, pushToDataLayer: true,\n    dataLayerKey: 'dataLayer', eventMapping: {},\n  },\n};\n\nexport const queue: TrackingEvent[] = [];\nexport let batchTimer: ReturnType<typeof setTimeout> | null = null;\nexport let initialized = false;\nexport let transportMethod = 'fetch';\nexport let adBlockDetected = false;\nexport let cookieKeeperTimer: ReturnType<typeof setInterval> | null = null;\n\n// Setters (ES module exported `let` bindings are read-only from outside)\nexport function mergeConfig(opts: Partial<TrackerConfig>): void {\n  Object.assign(config, opts, {\n    browserPixel: { ...config.browserPixel, ...((opts.browserPixel as object) ?? {}) },\n    cookieKeeper: { ...config.cookieKeeper, ...((opts.cookieKeeper as object) ?? {}) },\n    adBlockRecovery: { ...config.adBlockRecovery, ...((opts.adBlockRecovery as object) ?? {}) },\n    advancedMatching: { ...config.advancedMatching, ...((opts.advancedMatching as object) ?? {}) },\n    gtm: { ...config.gtm, ...((opts.gtm as object) ?? {}) },\n  });\n}\nexport function setInitialized(v: boolean): void { initialized = v; }\nexport function setTransportMethod(v: string): void { transportMethod = v; }\nexport function setAdBlockDetected(v: boolean): void { adBlockDetected = v; }\nexport function setBatchTimer(v: ReturnType<typeof setTimeout> | null): void { batchTimer = v; }\nexport function setCookieKeeperTimer(v: ReturnType<typeof setInterval> | null): void { cookieKeeperTimer = v; }\n\n// Logging\nexport function spliceQueue(count: number): TrackingEvent[] { return queue.splice(0, count); }\nexport function pushQueue(event: TrackingEvent): void { queue.push(event); }\nexport function log(...args: unknown[]): void { if (config.debug) console.log('[MetaTracker]', ...args); }\nexport function warn(...args: unknown[]): void { if (config.debug) console.warn('[MetaTracker]', ...args); }\n", "/**\n * Utility helpers \u2014 storage, hashing, ID generation.\n */\nimport { config } from './state';\n\nexport async function sha256(value: string): Promise<string | null> {\n  if (!value) return null;\n  const data = new TextEncoder().encode(value.toString().trim().toLowerCase());\n  const hash = await crypto.subtle.digest('SHA-256', data);\n  return Array.from(new Uint8Array(hash)).map((b) => b.toString(16).padStart(2, '0')).join('');\n}\n\nexport function isHashed(value: unknown): value is string {\n  return typeof value === 'string' && /^[a-f0-9]{64}$/.test(value);\n}\n\nexport function generateEventId(): string {\n  return `evt_${Date.now().toString(36)}_${Math.random().toString(36).substring(2, 10)}`;\n}\n\nexport function generateVisitorId(): string {\n  const stored = getFromStorage('_mt_id');\n  if (stored) return stored;\n  const id = 'mt.' + Date.now().toString(36) + '.' + Math.random().toString(36).substring(2, 12);\n  saveToStorage('_mt_id', id);\n  return id;\n}\n\nfunction getRootDomain(): string {\n  try {\n    const parts = window.location.hostname.split('.');\n    if (parts.length <= 1 || /^\\d+$/.test(parts[parts.length - 1])) return '';\n    return parts.slice(-2).join('.');\n  } catch { return ''; }\n}\n\nexport function setCookie(name: string, value: string, days: number): void {\n  const maxAge = days * 86_400;\n  const secure = location.protocol === 'https:' ? '; Secure' : '';\n  const domain = getRootDomain();\n  const domainStr = domain ? `; domain=.${domain}` : '';\n  document.cookie = `${name}=${encodeURIComponent(value)}; path=/${domainStr}; max-age=${maxAge}; SameSite=Lax${secure}`;\n}\n\nexport function getCookie(name: string): string | null {\n  const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));\n  return match ? decodeURIComponent(match[2]) : null;\n}\n\nexport function deleteCookie(name: string): void {\n  const domain = getRootDomain();\n  document.cookie = `${name}=; path=/${domain ? `; domain=.${domain}` : ''}; max-age=0`;\n}\n\nexport function getFromStorage(key: string): string | null {\n  const c = getCookie(key);\n  if (c) return c;\n  try { return localStorage.getItem('mt_' + key); } catch { return null; }\n}\n\nexport function saveToStorage(key: string, value: string, days?: number): void {\n  days = days ?? (config.cookieKeeper.maxAge || 180);\n  setCookie(key, value, days);\n  try { localStorage.setItem('mt_' + key, value); } catch { /* noop */ }\n}\n\nexport function removeFromStorage(key: string): void {\n  deleteCookie(key);\n  try { localStorage.removeItem('mt_' + key); } catch { /* noop */ }\n}\n", "/**\n * Ad Blocker Recovery \u2014 detection, disguised endpoints, payload obfuscation.\n */\nimport { config, adBlockDetected, setAdBlockDetected, log, VERSION } from './state';\nimport type { DisguisedPayload } from './types';\n\nexport const AdBlockRecovery = {\n  async detect(): Promise<boolean> {\n    if (!config.adBlockRecovery.enabled) return false;\n    try {\n      const testUrl = config.endpoint.replace(/\\/track\\/?$/, '') + '/health';\n      const ctrl = new AbortController();\n      const t = setTimeout(() => ctrl.abort(), 3000);\n      const r = await fetch(testUrl, { method: 'GET', signal: ctrl.signal, cache: 'no-store' });\n      clearTimeout(t);\n      if (!r.ok) throw new Error('Blocked');\n      return false;\n    } catch {\n      setAdBlockDetected(true);\n      log('AdBlockRecovery: DETECTED');\n      return true;\n    }\n  },\n\n  getEndpoint(path: string): string {\n    if (adBlockDetected && config.adBlockRecovery.proxyPath) {\n      return config.endpoint.replace(/\\/api\\/v1\\/track\\/?$/, '') + config.adBlockRecovery.proxyPath + path;\n    }\n    return config.endpoint + path;\n  },\n\n  getFallbackEndpoints(path: string): string[] {\n    const eps = [this.getEndpoint(path)];\n    for (const ep of config.adBlockRecovery.customEndpoints ?? []) eps.push(ep + path);\n    return eps;\n  },\n\n  disguisePayload(data: unknown): DisguisedPayload | unknown {\n    if (!adBlockDetected) return data;\n    return { d: btoa(JSON.stringify(data)), t: Date.now(), v: VERSION };\n  },\n\n  getHeaders(): Record<string, string> {\n    const h: Record<string, string> = { 'Content-Type': 'application/json' };\n    h[adBlockDetected ? 'X-Request-Token' : 'X-API-Key'] = config.apiKey;\n    return h;\n  },\n};\n", "/**\n * Transport Layer \u2014 fetch \u2192 beacon \u2192 XHR \u2192 image fallback chain.\n */\nimport { AdBlockRecovery } from './ad-block-recovery';\nimport {\n  config, adBlockDetected, transportMethod, setTransportMethod,\n  log, warn, RETRY_DELAYS,\n} from './state';\nimport type { TransportDef } from './types';\n\nexport function resolveEndpoint(path: string): string {\n  return adBlockDetected ? AdBlockRecovery.getEndpoint(path) : config.endpoint + path;\n}\n\nasync function viaFetch(url: string, data: unknown): Promise<unknown> {\n  const body = adBlockDetected ? AdBlockRecovery.disguisePayload(data) : data;\n  const r = await fetch(url, {\n    method: 'POST', headers: AdBlockRecovery.getHeaders(),\n    body: JSON.stringify(body), keepalive: true, credentials: 'include',\n  });\n  if (!r.ok) throw new Error(`HTTP ${r.status}`);\n  return r.json().catch(() => ({}));\n}\n\nfunction viaBeacon(url: string, data: unknown): Promise<unknown> {\n  const body = adBlockDetected ? AdBlockRecovery.disguisePayload(data) : data;\n  const blob = new Blob([JSON.stringify(body)], { type: 'application/json' });\n  if (!navigator.sendBeacon(url + '?api_key=' + encodeURIComponent(config.apiKey), blob)) {\n    throw new Error('Beacon failed');\n  }\n  return Promise.resolve({ sent: true });\n}\n\nfunction viaXhr(url: string, data: unknown): Promise<unknown> {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open('POST', url, true);\n    for (const [k, v] of Object.entries(AdBlockRecovery.getHeaders())) xhr.setRequestHeader(k, v);\n    xhr.withCredentials = true;\n    xhr.timeout = 10_000;\n    xhr.onload = () => xhr.status >= 200 && xhr.status < 300\n      ? resolve(JSON.parse(xhr.responseText || '{}'))\n      : reject(new Error(`XHR ${xhr.status}`));\n    xhr.onerror = () => reject(new Error('XHR error'));\n    xhr.ontimeout = () => reject(new Error('XHR timeout'));\n    const body = adBlockDetected ? AdBlockRecovery.disguisePayload(data) : data;\n    xhr.send(JSON.stringify(body));\n  });\n}\n\nfunction viaImage(url: string, data: unknown): Promise<unknown> {\n  return new Promise((resolve, reject) => {\n    const params = new URLSearchParams({ d: btoa(JSON.stringify(data)), k: config.apiKey, t: Date.now().toString() });\n    const imgUrl = url.replace(/\\/(event|batch)$/, '/pixel.gif') + '?' + params;\n    if (imgUrl.length > 4000) { reject(new Error('Payload too large')); return; }\n    const img = new Image(1, 1);\n    img.onload = () => resolve({ sent: true });\n    img.onerror = () => reject(new Error('Image pixel failed'));\n    img.src = imgUrl;\n  });\n}\n\nexport async function transportSend(url: string, data: unknown, attempt = 0): Promise<unknown> {\n  const transports: TransportDef[] = [\n    { name: 'fetch', fn: viaFetch },\n    { name: 'beacon', fn: viaBeacon, skip: !config.adBlockRecovery.useBeacon },\n    { name: 'xhr', fn: viaXhr },\n    { name: 'img', fn: viaImage, skip: !config.adBlockRecovery.useImage },\n  ].filter((t) => !t.skip);\n\n  for (const transport of transports) {\n    const pathSuffix = url.includes(config.endpoint)\n      ? url.replace(config.endpoint, '')\n      : url.replace(/^https?:\\/\\/[^/]+/, '').replace(/.*\\/api\\/v1\\/track/, '');\n    const endpoints = adBlockDetected ? AdBlockRecovery.getFallbackEndpoints(pathSuffix) : [url];\n\n    for (const ep of endpoints) {\n      try {\n        const result = await transport.fn(ep, data);\n        if (transport.name !== transportMethod) {\n          log(`Transport: ${transportMethod} \u2192 ${transport.name}`);\n          setTransportMethod(transport.name);\n        }\n        return result;\n      } catch (e: unknown) { log(`${transport.name} \u2192 ${ep}: ${(e as Error).message}`); }\n    }\n  }\n\n  if (attempt < RETRY_DELAYS.length) {\n    return new Promise((r) => setTimeout(() => r(transportSend(url, data, attempt + 1)), RETRY_DELAYS[attempt]));\n  }\n  warn('All transports exhausted');\n  return undefined;\n}\n", "/**\n * Cookie Keeper \u2014 ITP survival via server-side cookie renewal.\n */\nimport { config, log, warn, cookieKeeperTimer, setCookieKeeperTimer } from './state';\nimport { getCookie, setCookie, getFromStorage, saveToStorage, generateVisitorId } from './utils';\nimport { transportSend, resolveEndpoint } from './transport';\n\nexport const CookieKeeper = {\n  init(): void {\n    if (!config.cookieKeeper.enabled) return;\n    this.restoreCookies(); this.captureFbclid(); this.ensureFbp();\n    this.ensureVisitorId(); this.syncToServer(); this.scheduleRefresh();\n    log('CookieKeeper: ready', { fbp: this.getFbp(), fbc: this.getFbc() });\n  },\n\n  restoreCookies(): void {\n    for (const name of config.cookieKeeper.cookieNames ?? []) {\n      if (!getCookie(name)) {\n        try { const b = localStorage.getItem('mt_' + name); if (b) setCookie(name, b, config.cookieKeeper.maxAge); } catch { /* */ }\n      } else {\n        try { localStorage.setItem('mt_' + name, getCookie(name)!); } catch { /* */ }\n      }\n    }\n  },\n\n  captureFbclid(): void {\n    try {\n      const fbclid = new URL(window.location.href).searchParams.get('fbclid');\n      if (fbclid) saveToStorage('_fbc', `fb.1.${Math.floor(Date.now() / 1000)}.${fbclid}`, config.cookieKeeper.maxAge);\n    } catch { /* */ }\n  },\n\n  ensureFbp(): void {\n    if (!getFromStorage('_fbp')) {\n      saveToStorage('_fbp', `fb.1.${Date.now()}.${Math.floor(Math.random() * 2_147_483_647)}`, config.cookieKeeper.maxAge);\n    }\n  },\n\n  ensureVisitorId(): void { if (!getFromStorage('_mt_id')) generateVisitorId(); },\n\n  async syncToServer(): Promise<void> {\n    const cookies: Record<string, string | null> = {\n      _fbp: getFromStorage('_fbp'), _fbc: getFromStorage('_fbc'),\n      _mt_id: getFromStorage('_mt_id'), _mt_em: getFromStorage('_mt_em'), _mt_ph: getFromStorage('_mt_ph'),\n    };\n    if (!cookies._fbp && !cookies._fbc && !cookies._mt_id) return;\n    const last = getFromStorage('_mt_cookie_sync');\n    if (last && Date.now() - parseInt(last, 10) < config.cookieKeeper.refreshInterval) return;\n    try {\n      await transportSend(resolveEndpoint('/cookie-sync'), { cookies, domain: window.location.hostname, max_age: config.cookieKeeper.maxAge });\n      saveToStorage('_mt_cookie_sync', Date.now().toString(), 1);\n    } catch (e: unknown) { warn('CookieKeeper: sync failed', (e as Error).message); }\n  },\n\n  refreshCookies(): void {\n    for (const name of config.cookieKeeper.cookieNames ?? []) {\n      const v = getFromStorage(name); if (v) setCookie(name, v, config.cookieKeeper.maxAge);\n    }\n    saveToStorage('_mt_cookie_sync', '0', 1);\n    this.syncToServer();\n  },\n\n  scheduleRefresh(): void {\n    if (cookieKeeperTimer) clearInterval(cookieKeeperTimer);\n    setCookieKeeperTimer(setInterval(() => this.refreshCookies(), config.cookieKeeper.refreshInterval));\n    document.addEventListener('visibilitychange', () => { if (document.visibilityState === 'visible') this.restoreCookies(); });\n  },\n\n  getFbp(): string | null { return getFromStorage('_fbp'); },\n  getFbc(): string | null { return getFromStorage('_fbc'); },\n  getVisitorId(): string | null { return getFromStorage('_mt_id'); },\n};\n", "/**\n * Pixel Router \u2014 multi-domain pixel ID resolution.\n */\nimport { config } from './state';\n\nexport const PixelRouter = {\n  resolve(hostname?: string): string[] {\n    hostname = hostname ?? window.location.hostname;\n    if (!config.pixels?.length) return config.pixelId ? [config.pixelId] : [];\n    const matched: string[] = [];\n    let catchAll: string | null = null;\n    for (const pc of config.pixels) {\n      if (!pc.pixelId || !pc.domains) continue;\n      for (const pattern of pc.domains) {\n        if (pattern === '*') { catchAll = pc.pixelId; continue; }\n        if (this.matchDomain(hostname, pattern)) { matched.push(pc.pixelId); break; }\n      }\n    }\n    if (!matched.length && catchAll) matched.push(catchAll);\n    return [...new Set(matched)];\n  },\n\n  matchDomain(hostname: string, pattern: string): boolean {\n    if (hostname === pattern) return true;\n    if (pattern.startsWith('*.')) {\n      const suffix = pattern.substring(2);\n      return hostname.endsWith('.' + suffix) || hostname === suffix;\n    }\n    return hostname.endsWith('.' + pattern);\n  },\n\n  getAllPixelIds(): string[] {\n    if (!config.pixels?.length) return config.pixelId ? [config.pixelId] : [];\n    return [...new Set(config.pixels.map((p) => p.pixelId).filter(Boolean))];\n  },\n};\n", "/**\n * Advanced Matching \u2014 PII capture, normalisation, hashing, identity graph.\n *\n * Data sources (priority order):\n *   1. Explicit userData \u2192 track()\n *   2. identify() stored identity\n *   3. Auto-captured form data\n *   4. URL parameters\n *   5. DataLayer / GTM\n *   6. Meta tags / structured data\n */\n\nimport { config, log } from './state';\nimport { sha256, isHashed, getFromStorage } from './utils';\nimport { CookieKeeper } from './cookie-keeper';\nimport type {\n  MetaPiiField, CaptureSource, CapturedData,\n  HashedUserData, RawUserData, FieldPatterns, Normalizer,\n  AdvancedMatchingDiagnostics,\n} from './types';\n\n// \u2500\u2500 Module state \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nlet capturedData: CapturedData = {};\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// \u2500\u2500 NORMALIZERS (per Meta docs)\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nconst normalizers: Record<string, Normalizer> = {\n  em(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase();\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(v) ? v : null;\n  },\n  ph(v) {\n    if (!v) return null;\n    let d = v.replace(/\\D/g, '');\n    if (d.length < 7) return null;\n    if (d.startsWith('00')) d = d.substring(2);\n    return d || null;\n  },\n  fn(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase().replace(/^(mr|mrs|ms|miss|dr|prof)\\.?\\s*/i, '');\n    v = v.replace(/[^a-z\\s\\u00C0-\\u024F]/g, '');\n    try { v = v.normalize('NFD').replace(/[\\u0300-\\u036f]/g, ''); } catch { /* */ }\n    return v.trim() || null;\n  },\n  ln(v) { return normalizers.fn(v); },\n  ge(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase();\n    if (v.startsWith('m') || v === 'male') return 'm';\n    if (v.startsWith('f') || v === 'female') return 'f';\n    return null;\n  },\n  db(v) {\n    if (!v) return null;\n    v = v.trim();\n    if (/^\\d{8}$/.test(v)) return v;\n    const fmts: RegExp[] = [/^(\\d{4})-(\\d{2})-(\\d{2})$/, /^(\\d{2})\\/(\\d{2})\\/(\\d{4})$/, /^(\\d{2})-(\\d{2})-(\\d{4})$/];\n    for (const rx of fmts) {\n      const m = v.match(rx);\n      if (m) return m[1].length === 4 ? m[1] + m[2] + m[3] : m[3] + m[1] + m[2];\n    }\n    return null;\n  },\n  ct(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase().replace(/[^a-z\\s\\u00C0-\\u024F]/g, '');\n    try { v = v.normalize('NFD').replace(/[\\u0300-\\u036f]/g, ''); } catch { /* */ }\n    return v.trim() || null;\n  },\n  st(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase();\n    if (/^[a-z]{2}$/.test(v)) return v;\n    const m = v.match(/\\b([a-z]{2})\\b/);\n    return m ? m[1] : v.substring(0, 2);\n  },\n  zp(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase().replace(/\\s+/g, '');\n    if (/^\\d{5}(-\\d{4})?$/.test(v)) return v.substring(0, 5);\n    return v || null;\n  },\n  country(v) {\n    if (!v) return null;\n    v = v.trim().toLowerCase();\n    if (/^[a-z]{2}$/.test(v)) return v;\n    const map: Record<string, string> = {\n      'united states': 'us', 'usa': 'us', 'united kingdom': 'gb', 'uk': 'gb',\n      'canada': 'ca', 'australia': 'au', 'germany': 'de', 'france': 'fr',\n      'indonesia': 'id', 'japan': 'jp', 'india': 'in', 'brazil': 'br',\n      'mexico': 'mx', 'spain': 'es', 'italy': 'it', 'netherlands': 'nl',\n      'singapore': 'sg', 'malaysia': 'my', 'philippines': 'ph', 'thailand': 'th',\n      'vietnam': 'vn', 'south korea': 'kr', 'china': 'cn', 'taiwan': 'tw',\n      'hong kong': 'hk', 'new zealand': 'nz', 'portugal': 'pt', 'sweden': 'se',\n      'norway': 'no', 'denmark': 'dk', 'finland': 'fi', 'poland': 'pl',\n      'cambodia': 'kh', 'turkey': 'tr', 'argentina': 'ar', 'colombia': 'co',\n      'chile': 'cl', 'peru': 'pe', 'south africa': 'za', 'nigeria': 'ng',\n      'egypt': 'eg', 'saudi arabia': 'sa', 'united arab emirates': 'ae', 'uae': 'ae',\n      'russia': 'ru', 'ukraine': 'ua', 'ireland': 'ie', 'switzerland': 'ch',\n      'austria': 'at', 'belgium': 'be', 'czech republic': 'cz', 'romania': 'ro',\n    };\n    return map[v] ?? (v.length === 2 ? v : null);\n  },\n  external_id(v) { return v?.trim() || null; },\n};\n\n// \u2500\u2500 Field detection patterns \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nconst fieldPatterns: Record<string, FieldPatterns> = {\n  em: {\n    types: ['email'],\n    names: ['email', 'e-mail', 'user_email', 'userEmail', 'customer_email', 'login', 'username', 'emailAddress', 'email_address'],\n    ids: ['email', 'user-email', 'customer-email', 'signup-email', 'login-email'],\n    autocomplete: ['email'],\n    placeholders: ['email', 'e-mail', 'your email', 'email address'],\n  },\n  ph: {\n    types: ['tel'],\n    names: ['phone', 'telephone', 'tel', 'mobile', 'phone_number', 'phoneNumber', 'cell', 'cellphone', 'mobile_number', 'contact_number', 'whatsapp'],\n    ids: ['phone', 'telephone', 'mobile', 'phone-number'],\n    autocomplete: ['tel', 'tel-national', 'tel-local'],\n    placeholders: ['phone', 'telephone', 'mobile', 'whatsapp', 'nomor telepon', 'hp'],\n  },\n  fn: {\n    names: ['first_name', 'firstName', 'fname', 'given-name', 'givenName', 'first', 'name_first', 'billing_first_name'],\n    ids: ['first-name', 'firstname', 'fname', 'given-name'],\n    autocomplete: ['given-name'],\n    placeholders: ['first name', 'given name', 'nama depan'],\n  },\n  ln: {\n    names: ['last_name', 'lastName', 'lname', 'family-name', 'familyName', 'surname', 'last', 'name_last', 'billing_last_name'],\n    ids: ['last-name', 'lastname', 'lname', 'family-name', 'surname'],\n    autocomplete: ['family-name'],\n    placeholders: ['last name', 'family name', 'surname', 'nama belakang'],\n  },\n  ct: {\n    names: ['city', 'town', 'billing_city', 'shipping_city', 'address_city'],\n    ids: ['city', 'billing-city', 'shipping-city'],\n    autocomplete: ['address-level2'],\n    placeholders: ['city', 'town', 'kota'],\n  },\n  st: {\n    names: ['state', 'province', 'region', 'billing_state', 'shipping_state'],\n    ids: ['state', 'province', 'region', 'billing-state'],\n    autocomplete: ['address-level1'],\n    placeholders: ['state', 'province', 'region', 'provinsi'],\n  },\n  zp: {\n    names: ['zip', 'zipcode', 'zip_code', 'postal', 'postal_code', 'postcode', 'billing_zip', 'billing_postcode', 'shipping_zip'],\n    ids: ['zip', 'zipcode', 'postal-code', 'postcode'],\n    autocomplete: ['postal-code'],\n    placeholders: ['zip', 'postal code', 'zip code', 'kode pos'],\n  },\n  country: {\n    names: ['country', 'country_code', 'countryCode', 'billing_country', 'shipping_country'],\n    ids: ['country', 'billing-country', 'shipping-country'],\n    autocomplete: ['country', 'country-name'],\n    placeholders: ['country', 'negara'],\n  },\n  ge: { names: ['gender', 'sex'], ids: ['gender', 'sex'], autocomplete: ['sex'], placeholders: ['gender', 'jenis kelamin'] },\n  db: {\n    names: ['birthday', 'birthdate', 'date_of_birth', 'dob', 'dateOfBirth', 'birth_date', 'bday'],\n    ids: ['birthday', 'birthdate', 'dob', 'date-of-birth'],\n    autocomplete: ['bday'],\n    placeholders: ['birthday', 'date of birth', 'tanggal lahir'],\n  },\n};\n\n// \u2500\u2500 Source priority \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nconst sourcePriority: Record<CaptureSource, number> = {\n  explicit: 100, identify: 90, form: 80, form_prefill: 70,\n  url: 60, dataLayer: 50, customDataLayer: 50, metatag: 30,\n};\n\n// \u2500\u2500 Mapping tables \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nconst dataLayerFieldMap: Record<string, MetaPiiField> = {\n  email: 'em', em: 'em', user_email: 'em', customerEmail: 'em',\n  phone: 'ph', ph: 'ph', telephone: 'ph', mobile: 'ph', phoneNumber: 'ph',\n  first_name: 'fn', fn: 'fn', firstName: 'fn', givenName: 'fn',\n  last_name: 'ln', ln: 'ln', lastName: 'ln', familyName: 'ln', surname: 'ln',\n  gender: 'ge', ge: 'ge', sex: 'ge',\n  date_of_birth: 'db', db: 'db', birthday: 'db', dob: 'db', birthdate: 'db',\n  city: 'ct', ct: 'ct', town: 'ct',\n  state: 'st', st: 'st', province: 'st', region: 'st',\n  zip: 'zp', zp: 'zp', zipcode: 'zp', postal_code: 'zp', postcode: 'zp',\n  country: 'country', country_code: 'country', countryCode: 'country',\n  external_id: 'external_id', user_id: 'external_id', userId: 'external_id',\n  customer_id: 'external_id', customerId: 'external_id',\n};\n\nconst aliasMap: Record<string, MetaPiiField> = {\n  email: 'em', phone: 'ph', first_name: 'fn', last_name: 'ln',\n  gender: 'ge', date_of_birth: 'db', city: 'ct', state: 'st',\n  zip: 'zp', zipcode: 'zp', postal_code: 'zp',\n};\n\nconst storageMap: Partial<Record<MetaPiiField, string>> = {\n  em: '_mt_em', ph: '_mt_ph', external_id: '_mt_eid',\n  fn: '_mt_fn', ln: '_mt_ln', ct: '_mt_ct', st: '_mt_st',\n  zp: '_mt_zp', country: '_mt_country',\n};\n\n// \u2500\u2500 PII field list \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nconst PII_FIELDS: MetaPiiField[] = ['em', 'ph', 'fn', 'ln', 'ge', 'db', 'ct', 'st', 'zp', 'country', 'external_id'];\nconst NON_PII_FIELDS = ['client_ip_address', 'client_user_agent', 'fbc', 'fbp', 'subscription_id', 'fb_login_id', 'lead_id'] as const;\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// \u2500\u2500 EXPORTED MODULE\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nexport const AdvancedMatching = {\n\n  // \u2500\u2500 Lifecycle \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  init(): void {\n    if (!config.advancedMatching.enabled) return;\n    log('AdvancedMatching: initializing');\n    if (config.advancedMatching.captureUrlParams) this.captureFromUrl();\n    if (config.advancedMatching.captureMetaTags) this.captureFromMetaTags();\n    if (config.advancedMatching.captureDataLayer) this.captureFromDataLayer();\n    if (config.advancedMatching.autoCaptureForms) this.watchForms();\n    log('AdvancedMatching: ready, captured:', Object.keys(capturedData));\n  },\n\n  // \u2500\u2500 Normalize + Hash \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  normalize(field: string, value: string): string | null {\n    if (isHashed(value)) return value;\n    const fn = normalizers[field];\n    return fn ? fn(value) : (value ? String(value).trim().toLowerCase() : null);\n  },\n\n  async normalizeAndHash(userData: RawUserData): Promise<HashedUserData> {\n    if (!userData) return {};\n    const result: HashedUserData = {};\n\n    for (const field of PII_FIELDS) {\n      const value = (userData as Record<string, string | undefined>)[field];\n      if (!value) continue;\n      if (isHashed(value)) { result[field] = value; continue; }\n      const normalized = this.normalize(field, value);\n      if (!normalized) continue;\n      result[field] = config.hashPii ? (await sha256(normalized) ?? undefined) : normalized;\n    }\n\n    for (const field of NON_PII_FIELDS) {\n      if ((userData as Record<string, string | undefined>)[field]) {\n        result[field] = (userData as Record<string, string | undefined>)[field];\n      }\n    }\n    return result;\n  },\n\n  // \u2500\u2500 Form Auto-Capture \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  detectFieldParam(input: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement): string | null {\n    const type = (input.type || '').toLowerCase();\n    const name = (input.name || '').toLowerCase();\n    const id = (input.id || '').toLowerCase();\n    const ac = (input.autocomplete || '').toLowerCase();\n    const ph = ('placeholder' in input ? (input.placeholder || '') : '').toLowerCase();\n\n    // Custom map first\n    for (const [sel, param] of Object.entries(config.advancedMatching.formFieldMap ?? {})) {\n      try { if (input.matches(sel)) return param; } catch { /* */ }\n    }\n\n    for (const [param, p] of Object.entries(fieldPatterns)) {\n      if (p.types?.includes(type)) return param;\n      if (p.names?.some((n) => name.includes(n))) return param;\n      if (p.ids?.some((i) => id.includes(i))) return param;\n      if (p.autocomplete?.includes(ac)) return param;\n      if (p.placeholders?.some((x) => ph.includes(x))) return param;\n    }\n\n    if (['name', 'full_name', 'fullname', 'customer_name'].includes(name) ||\n        ['name', 'full-name', 'fullname'].includes(id)) return '_fullname';\n\n    return null;\n  },\n\n  scanForm(form: HTMLFormElement): RawUserData {\n    const data: Record<string, string> = {};\n    const inputs = form.querySelectorAll<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>('input, select, textarea');\n    for (const input of inputs) {\n      if (['hidden', 'password', 'submit'].includes((input as HTMLInputElement).type)) continue;\n      const value = input.value?.trim();\n      if (!value) continue;\n      const param = this.detectFieldParam(input);\n      if (!param) continue;\n      if (param === '_fullname') {\n        const parts = value.split(/\\s+/);\n        if (parts.length >= 2) { data.fn = data.fn || parts[0]; data.ln = data.ln || parts.slice(1).join(' '); }\n        else { data.fn = data.fn || value; }\n      } else { data[param] = data[param] || value; }\n    }\n    return data as RawUserData;\n  },\n\n  watchForms(): void {\n    document.addEventListener('submit', (e: Event) => {\n      const form = e.target;\n      if (!(form instanceof HTMLFormElement)) return;\n      const data = this.scanForm(form);\n      if (Object.keys(data).length) {\n        this._mergeCapture('form', data);\n        log('AdvancedMatching: form submit captured', Object.keys(data));\n        if (config.advancedMatching.autoIdentifyOnSubmit && (data.em || data.ph)) {\n          window.MetaTracker?.identify(data);\n        }\n      }\n    }, true);\n\n    document.addEventListener('change', (e: Event) => {\n      const input = e.target;\n      if (!(input instanceof HTMLInputElement) && !(input instanceof HTMLSelectElement)) return;\n      const value = input.value?.trim();\n      if (!value) return;\n      const param = this.detectFieldParam(input);\n      if (!param || param === '_fullname') return;\n      this._mergeCapture('form', { [param]: value } as RawUserData);\n      log('AdvancedMatching: field captured', param);\n    }, true);\n\n    // Scan existing forms and observe for new ones once DOM is ready\n    const startObserving = () => {\n      document.querySelectorAll<HTMLFormElement>('form').forEach((f) => {\n        const d = this.scanForm(f);\n        if (Object.keys(d).length) { this._mergeCapture('form_prefill', d); log('AdvancedMatching: pre-filled form scanned', Object.keys(d)); }\n      });\n\n      // Watch dynamic forms\n      if (typeof MutationObserver !== 'undefined' && document.body) {\n        const obs = new MutationObserver((muts) => {\n          for (const mut of muts) for (const node of mut.addedNodes) {\n            if (!(node instanceof HTMLElement)) continue;\n            const forms = node.tagName === 'FORM' ? [node as HTMLFormElement] : [...node.querySelectorAll<HTMLFormElement>('form')];\n            for (const f of forms) { const d = this.scanForm(f); if (Object.keys(d).length) this._mergeCapture('form_prefill', d); }\n          }\n        });\n        obs.observe(document.body, { childList: true, subtree: true });\n      }\n    };\n\n    // Defer if document.body isn't available yet (script in <head>)\n    if (document.body) {\n      startObserving();\n    } else {\n      document.addEventListener('DOMContentLoaded', startObserving);\n    }\n  },\n\n  // \u2500\u2500 URL Parameter Capture \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  captureFromUrl(): void {\n    try {\n      const params = new URL(window.location.href).searchParams;\n      const data: Record<string, string> = {};\n\n      for (const p of ['email', 'em', 'e', 'user_email', 'customer_email']) {\n        const v = params.get(p); if (v?.includes('@')) { data.em = v; break; }\n      }\n      for (const p of ['phone', 'ph', 'tel', 'mobile', 'whatsapp']) {\n        const v = params.get(p); if (v && v.replace(/\\D/g, '').length >= 7) { data.ph = v; break; }\n      }\n      const fn = params.get('first_name') ?? params.get('fn'); if (fn) data.fn = fn;\n      const ln = params.get('last_name') ?? params.get('ln'); if (ln) data.ln = ln;\n      for (const p of ['external_id', 'eid', 'user_id', 'uid', 'customer_id', 'player_id']) {\n        const v = params.get(p); if (v) { data.external_id = v; break; }\n      }\n      const cc = params.get('country') ?? params.get('cc'); if (cc) data.country = cc;\n\n      if (Object.keys(data).length) { this._mergeCapture('url', data as RawUserData); log('AdvancedMatching: URL params captured', Object.keys(data)); }\n    } catch { /* */ }\n  },\n\n  // \u2500\u2500 DataLayer Capture \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  captureFromDataLayer(): void {\n    const dlKey = config.advancedMatching.dataLayerKey || 'dataLayer';\n    const dl = window[dlKey] as unknown[] | undefined;\n\n    if (Array.isArray(dl)) {\n      for (const entry of dl) this._extractFromDataLayerEntry(entry);\n      const origPush = dl.push.bind(dl);\n      dl.push = (...args: unknown[]): number => {\n        const r = origPush(...args);\n        for (const entry of args) this._extractFromDataLayerEntry(entry);\n        return r;\n      };\n    }\n\n    const udk = config.advancedMatching.userDataKey;\n    if (udk && window[udk]) this._extractUserObject(window[udk] as Record<string, unknown>, 'customDataLayer');\n  },\n\n  _extractFromDataLayerEntry(entry: unknown): void {\n    if (!entry || typeof entry !== 'object') return;\n    const obj = entry as Record<string, unknown>;\n    for (const key of ['user', 'userData', 'user_data', 'customer', 'visitor', 'contact']) {\n      if (obj[key] && typeof obj[key] === 'object') this._extractUserObject(obj[key] as Record<string, unknown>, 'dataLayer');\n    }\n    const ecom = obj.ecommerce as Record<string, unknown> | undefined;\n    const af = (ecom?.purchase as Record<string, unknown> | undefined)?.actionField as Record<string, unknown> | undefined;\n    if (af?.email) this._mergeCapture('dataLayer', { em: af.email as string });\n    this._extractUserObject(obj, 'dataLayer');\n  },\n\n  _extractUserObject(obj: Record<string, unknown>, source: CaptureSource): void {\n    if (!obj) return;\n    const data: Record<string, string> = {};\n    for (const [key, param] of Object.entries(dataLayerFieldMap)) {\n      const val = obj[key];\n      if (val && typeof val === 'string' && val.trim()) data[param] = val.trim();\n    }\n    if (Object.keys(data).length) { this._mergeCapture(source, data as RawUserData); log('AdvancedMatching: data layer captured', Object.keys(data)); }\n  },\n\n  // \u2500\u2500 Meta Tag Capture \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  captureFromMetaTags(): void {\n    const data: Record<string, string> = {};\n\n    for (const script of document.querySelectorAll<HTMLScriptElement>('script[type=\"application/ld+json\"]')) {\n      try {\n        const j = JSON.parse(script.textContent || '') as Record<string, unknown>;\n        if (j.email) data.em = j.email as string;\n        if (j.telephone) data.ph = j.telephone as string;\n        if (j.givenName) data.fn = j.givenName as string;\n        if (j.familyName) data.ln = j.familyName as string;\n        if (j.address && typeof j.address === 'object') {\n          const a = j.address as Record<string, string>;\n          if (a.addressLocality) data.ct = a.addressLocality;\n          if (a.addressRegion) data.st = a.addressRegion;\n          if (a.postalCode) data.zp = a.postalCode;\n          if (a.addressCountry) data.country = a.addressCountry;\n        }\n      } catch { /* */ }\n    }\n\n    const meta = (prop: string) => document.querySelector<HTMLMetaElement>(`meta[property=\"${prop}\"]`)?.content;\n    if (meta('profile:email')) data.em = meta('profile:email')!;\n    if (meta('profile:first_name')) data.fn = meta('profile:first_name')!;\n    if (meta('profile:last_name')) data.ln = meta('profile:last_name')!;\n    if (meta('profile:gender')) data.ge = meta('profile:gender')!;\n\n    if (Object.keys(data).length) { this._mergeCapture('metatag', data as RawUserData); log('AdvancedMatching: meta tags captured', Object.keys(data)); }\n  },\n\n  // \u2500\u2500 Identity Graph \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  _mergeCapture(source: CaptureSource, data: RawUserData): void {\n    for (const [param, value] of Object.entries(data)) {\n      if (!value) continue;\n      const existing = capturedData[param];\n      const existingP = existing ? (sourcePriority[existing.source] ?? 0) : -1;\n      if (!existing || (sourcePriority[source] ?? 0) >= existingP) {\n        capturedData[param] = { value, source };\n      }\n    }\n  },\n\n  getCapturedData(): RawUserData {\n    const r: Record<string, string> = {};\n    for (const [p, e] of Object.entries(capturedData)) r[p] = e.value;\n    return r as RawUserData;\n  },\n\n  async buildUserData(explicitUserData: RawUserData = {}): Promise<HashedUserData> {\n    // Merge: auto-captured \u2192 stored identity \u2192 explicit (highest priority)\n    const merged: Record<string, string> = { ...this.getCapturedData() as Record<string, string> };\n\n    for (const [field, key] of Object.entries(storageMap)) {\n      if (!merged[field] && key) { const v = getFromStorage(key); if (v) merged[field] = v; }\n    }\n\n    for (const [key, value] of Object.entries(explicitUserData)) {\n      if (!value) continue;\n      merged[aliasMap[key] ?? key] = value;\n    }\n\n    const result = await this.normalizeAndHash(merged as RawUserData);\n\n    result.fbp = result.fbp || CookieKeeper.getFbp() || undefined;\n    result.fbc = result.fbc || CookieKeeper.getFbc() || undefined;\n    result.client_user_agent = result.client_user_agent || navigator.userAgent;\n\n    if (!result.external_id) {\n      const vid = CookieKeeper.getVisitorId();\n      if (vid) result.external_id = (await sha256(vid)) ?? undefined;\n    }\n\n    return result;\n  },\n\n  // \u2500\u2500 Match Quality Scoring \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  scoreMatchQuality(userData: HashedUserData): number {\n    const weights: Record<string, number> = {\n      em: 30, ph: 25, external_id: 15, fn: 5, ln: 5,\n      ct: 3, st: 2, zp: 3, country: 2, ge: 2, db: 3,\n      fbp: 5, fbc: 10, client_ip_address: 3, client_user_agent: 2,\n    };\n    let score = 0;\n    for (const [f, w] of Object.entries(weights)) {\n      if ((userData as Record<string, unknown>)[f]) score += w;\n    }\n    return Math.min(score, 100);\n  },\n\n  // \u2500\u2500 Diagnostics \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n  getDiagnostics(): AdvancedMatchingDiagnostics {\n    const fields: AdvancedMatchingDiagnostics['fields'] = {};\n    for (const [p, e] of Object.entries(capturedData)) {\n      fields[p] = { source: e.source, hasValue: true, isHashed: isHashed(e.value) };\n    }\n    return {\n      capturedFields: Object.keys(capturedData).length,\n      fields,\n      storedIdentity: {\n        em: !!getFromStorage('_mt_em'), ph: !!getFromStorage('_mt_ph'),\n        fn: !!getFromStorage('_mt_fn'), ln: !!getFromStorage('_mt_ln'),\n        external_id: !!getFromStorage('_mt_eid'),\n      },\n    };\n  },\n\n  resetCapturedData(): void { capturedData = {}; },\n\n  // Re-export for external use\n  aliasMap,\n  storageMap,\n};\n", "/**\n * BrowserPixel \u2014 Auto-load Meta fbevents.js and sync events for deduplication.\n */\nimport { config, log, warn } from './state';\nimport { PixelRouter } from './pixel-router';\n\nconst STANDARD_EVENTS = [\n  'PageView', 'ViewContent', 'AddToCart', 'AddPaymentInfo',\n  'AddToWishlist', 'CompleteRegistration', 'Contact', 'CustomizeProduct',\n  'Donate', 'FindLocation', 'InitiateCheckout', 'Lead', 'Purchase',\n  'Schedule', 'Search', 'StartTrial', 'SubmitApplication', 'Subscribe',\n] as const;\n\nexport const BrowserPixel = {\n  _loaded: false,\n\n  init(): void {\n    if (!config.browserPixel.enabled) return;\n    if (this._loaded) return;\n\n    if (typeof (window as any).fbq === 'function') {\n      log('BrowserPixel: fbq already present, initializing pixels');\n      this._initPixels();\n      this._loaded = true;\n      return;\n    }\n\n    log('BrowserPixel: loading fbevents.js');\n\n    const n: any = (window as any).fbq = function () {\n      n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments);\n    };\n    if (!(window as any)._fbq) (window as any)._fbq = n;\n    n.push = n;\n    n.loaded = true;\n    n.version = '2.0';\n    n.queue = [] as any[];\n\n    const script = document.createElement('script');\n    script.async = true;\n    script.src = 'https://connect.facebook.net/en_US/fbevents.js';\n    const firstScript = document.getElementsByTagName('script')[0];\n    if (firstScript && firstScript.parentNode) {\n      firstScript.parentNode.insertBefore(script, firstScript);\n    } else {\n      const insert = () => {\n        const s = document.getElementsByTagName('script')[0];\n        if (s && s.parentNode) s.parentNode.insertBefore(script, s);\n        else document.head.appendChild(script);\n      };\n      if (document.body) insert();\n      else document.addEventListener('DOMContentLoaded', insert);\n    }\n\n    this._initPixels();\n    this._loaded = true;\n  },\n\n  _initPixels(): void {\n    const pixelIds = PixelRouter.getAllPixelIds();\n    if (!pixelIds.length) { warn('BrowserPixel: no pixel IDs configured'); return; }\n\n    for (const pid of pixelIds) {\n      (window as any).fbq('init', pid);\n      log('BrowserPixel: init pixel', pid);\n    }\n\n    if (config.browserPixel.autoPageView) {\n      (window as any).fbq('track', 'PageView');\n      log('BrowserPixel: PageView fired');\n    }\n  },\n\n  trackEvent(eventName: string, eventId: string, customData: Record<string, unknown> = {}): void {\n    if (!config.browserPixel.enabled || !config.browserPixel.syncEvents) return;\n    if (typeof (window as any).fbq !== 'function') return;\n\n    const isStandard = (STANDARD_EVENTS as readonly string[]).includes(eventName);\n    const fbqParams = { ...customData };\n    const fbqOptions = { eventID: eventId };\n\n    if (isStandard) {\n      (window as any).fbq('track', eventName, fbqParams, fbqOptions);\n    } else {\n      (window as any).fbq('trackCustom', eventName, fbqParams, fbqOptions);\n    }\n\n    log('BrowserPixel: synced', eventName, 'eventID:', eventId);\n  },\n};\n", "/**\n * GTM Integration \u2014 DataLayer bridge for Google Tag Manager.\n *\n * Automatically maps GA4/Enhanced Ecommerce dataLayer events to Meta CAPI\n * events, and optionally pushes MetaTracker events back to the dataLayer\n * for other GTM tags to consume.\n *\n * Supported GA4 ecommerce events:\n *   - page_view       \u2192 PageView\n *   - view_item       \u2192 ViewContent\n *   - add_to_cart     \u2192 AddToCart\n *   - remove_from_cart (logged only)\n *   - add_to_wishlist \u2192 AddToWishlist\n *   - begin_checkout  \u2192 InitiateCheckout\n *   - add_payment_info \u2192 AddPaymentInfo\n *   - purchase        \u2192 Purchase\n *   - sign_up         \u2192 CompleteRegistration\n *   - generate_lead   \u2192 Lead\n *   - search          \u2192 Search\n *   - view_item_list  \u2192 ViewContent\n *   - select_item     \u2192 ViewContent\n */\n\nimport { config, log, warn } from './state';\nimport type { CustomData, RawUserData, GtmConfig } from './types';\n\n// \u2500\u2500 GA4 \u2192 Meta event mapping \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nconst GA4_EVENT_MAP: Record<string, string> = {\n  page_view: 'PageView',\n  view_item: 'ViewContent',\n  view_item_list: 'ViewContent',\n  select_item: 'ViewContent',\n  add_to_cart: 'AddToCart',\n  add_to_wishlist: 'AddToWishlist',\n  begin_checkout: 'InitiateCheckout',\n  add_payment_info: 'AddPaymentInfo',\n  purchase: 'Purchase',\n  refund: '', // skip\n  remove_from_cart: '', // skip\n  sign_up: 'CompleteRegistration',\n  generate_lead: 'Lead',\n  search: 'Search',\n  login: '', // skip \u2014 no direct Meta equivalent\n  view_cart: 'ViewContent',\n  add_shipping_info: 'AddPaymentInfo',\n  select_promotion: 'ViewContent',\n};\n\n// \u2500\u2500 Ecommerce data extraction \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\ninterface GA4Item {\n  item_id?: string;\n  item_name?: string;\n  item_category?: string;\n  price?: number;\n  quantity?: number;\n  [key: string]: unknown;\n}\n\ninterface GA4EcommerceData {\n  items?: GA4Item[];\n  value?: number;\n  currency?: string;\n  transaction_id?: string;\n  shipping?: number;\n  tax?: number;\n  coupon?: string;\n  search_term?: string;\n  [key: string]: unknown;\n}\n\nfunction extractCustomData(eventName: string, ecommerce: GA4EcommerceData | undefined, dlEntry: Record<string, unknown>): CustomData {\n  const cd: CustomData = {};\n\n  const ecom = ecommerce ?? {};\n\n  // Value & currency\n  if (ecom.value !== undefined) cd.value = Number(ecom.value);\n  if (ecom.currency) cd.currency = String(ecom.currency);\n\n  // Transaction / order ID\n  if (ecom.transaction_id) cd.order_id = String(ecom.transaction_id);\n\n  // Search\n  if (ecom.search_term) cd.search_string = String(ecom.search_term);\n  if (dlEntry.search_term) cd.search_string = String(dlEntry.search_term);\n\n  // Items \u2192 content_ids, contents, num_items, content_type\n  if (Array.isArray(ecom.items) && ecom.items.length) {\n    cd.content_ids = ecom.items\n      .map((item) => item.item_id ?? item.item_name ?? '')\n      .filter(Boolean);\n\n    cd.contents = ecom.items.map((item) => ({\n      id: String(item.item_id ?? item.item_name ?? ''),\n      quantity: item.quantity ?? 1,\n      item_price: item.price,\n    }));\n\n    cd.num_items = ecom.items.reduce((sum, item) => sum + (item.quantity ?? 1), 0);\n\n    // Infer content_type\n    cd.content_type = 'product';\n\n    // Content name from first item\n    if (ecom.items[0]?.item_name) cd.content_name = ecom.items[0].item_name;\n\n    // Category from first item\n    if (ecom.items[0]?.item_category) cd.content_category = ecom.items[0].item_category;\n  }\n\n  // Fallback value from items if not set\n  if (cd.value === undefined && cd.contents?.length) {\n    cd.value = cd.contents.reduce(\n      (sum, c) => sum + ((c.item_price ?? 0) * (c.quantity ?? 1)), 0,\n    );\n  }\n\n  return cd;\n}\n\nfunction extractUserData(dlEntry: Record<string, unknown>): RawUserData {\n  const ud: Record<string, string> = {};\n\n  // Look for user data in common dataLayer patterns\n  const userKeys = ['user', 'userData', 'user_data', 'customer', 'visitor', 'contact'];\n  for (const key of userKeys) {\n    if (dlEntry[key] && typeof dlEntry[key] === 'object') {\n      const obj = dlEntry[key] as Record<string, unknown>;\n      if (obj.email || obj.em) ud.em = String(obj.email ?? obj.em);\n      if (obj.phone || obj.ph) ud.ph = String(obj.phone ?? obj.ph);\n      if (obj.first_name || obj.fn || obj.firstName) ud.fn = String(obj.first_name ?? obj.fn ?? obj.firstName);\n      if (obj.last_name || obj.ln || obj.lastName) ud.ln = String(obj.last_name ?? obj.ln ?? obj.lastName);\n      if (obj.external_id || obj.user_id || obj.userId) ud.external_id = String(obj.external_id ?? obj.user_id ?? obj.userId);\n      if (obj.city || obj.ct) ud.ct = String(obj.city ?? obj.ct);\n      if (obj.state || obj.st) ud.st = String(obj.state ?? obj.st);\n      if (obj.zip || obj.zp || obj.postal_code) ud.zp = String(obj.zip ?? obj.zp ?? obj.postal_code);\n      if (obj.country || obj.country_code) ud.country = String(obj.country ?? obj.country_code);\n    }\n  }\n\n  // Also check top-level user fields (some implementations put them directly)\n  if (dlEntry.user_id) ud.external_id = ud.external_id || String(dlEntry.user_id);\n  if (dlEntry.userId) ud.external_id = ud.external_id || String(dlEntry.userId);\n\n  return ud as RawUserData;\n}\n\n// \u2500\u2500 Module state \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nlet _initialized = false;\nlet _originalPush: ((...args: unknown[]) => number) | null = null;\n\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n// \u2500\u2500 EXPORTED MODULE\n// \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\nexport const GtmIntegration = {\n\n  init(): void {\n    if (!config.gtm.enabled) return;\n    if (_initialized) return;\n\n    try {\n      log('GTM: initializing dataLayer bridge');\n\n      const dlKey = config.gtm.dataLayerKey || 'dataLayer';\n      const dl = window[dlKey] as unknown[] | undefined;\n\n      if (!Array.isArray(dl)) {\n        // Create dataLayer if it doesn't exist\n        (window as Record<string, unknown>)[dlKey] = [];\n        log('GTM: created', dlKey);\n      }\n\n      const dataLayer = (window as Record<string, unknown>)[dlKey] as unknown[];\n\n      // Process existing entries\n      if (config.gtm.autoMapEcommerce) {\n        for (const entry of dataLayer) {\n          try {\n            this._processEntry(entry);\n          } catch (err) {\n            warn('GTM: error processing existing dataLayer entry', err);\n          }\n        }\n      }\n\n      // Intercept future pushes\n      _originalPush = dataLayer.push.bind(dataLayer);\n      dataLayer.push = (...args: unknown[]): number => {\n        const result = _originalPush!(...args);\n        if (config.gtm.autoMapEcommerce) {\n          for (const entry of args) {\n            try {\n              this._processEntry(entry);\n            } catch (err) {\n              warn('GTM: error processing dataLayer push', err);\n            }\n          }\n        }\n        return result;\n      };\n\n      _initialized = true;\n      log('GTM: dataLayer bridge active');\n    } catch (err) {\n      warn('GTM: failed to initialize dataLayer bridge', err);\n    }\n  },\n\n  /**\n   * Process a single dataLayer entry and fire the corresponding Meta event.\n   */\n  _processEntry(entry: unknown): void {\n    if (!entry || typeof entry !== 'object') return;\n\n    const obj = entry as Record<string, unknown>;\n    const event = obj.event as string | undefined;\n    if (!event || typeof event !== 'string') return;\n\n    // Skip internal GTM events and our own events to prevent loops\n    if (event.startsWith('gtm.')) return;\n    if (obj._source === 'meta-capi-tracker') return;\n\n    // Resolve Meta event name\n    const metaEvent = this._resolveEventName(event);\n    if (!metaEvent) return;\n\n    // Extract ecommerce and user data with defensive error handling\n    let customData: CustomData = {};\n    let userData: RawUserData = {};\n\n    try {\n      const ecommerce = obj.ecommerce as GA4EcommerceData | undefined;\n      customData = extractCustomData(event, ecommerce, obj);\n      userData = extractUserData(obj);\n    } catch (err) {\n      warn('GTM: error extracting data from dataLayer entry', event, err);\n      return;\n    }\n\n    log('GTM: mapping', event, '\u2192', metaEvent);\n\n    // Fire MetaTracker event (without re-pushing to dataLayer to avoid loops)\n    if (window.MetaTracker && typeof window.MetaTracker.track === 'function') {\n      window.MetaTracker.track(metaEvent, customData, userData).catch((err: unknown) => {\n        warn('GTM: failed to track mapped event', metaEvent, err);\n      });\n    }\n  },\n\n  /**\n   * Resolve a dataLayer event name to a Meta CAPI event name.\n   */\n  _resolveEventName(dlEvent: string): string | null {\n    // Custom mapping takes priority\n    const custom = config.gtm.eventMapping[dlEvent];\n    if (custom) return custom;\n\n    // Built-in GA4 mapping\n    const mapped = GA4_EVENT_MAP[dlEvent];\n    if (mapped !== undefined) return mapped || null; // empty string = skip\n\n    return null; // Unknown event \u2014 don't map\n  },\n\n  /**\n   * Push an event to the GTM dataLayer.\n   */\n  pushToDataLayer(event: string, data: Record<string, unknown> = {}): void {\n    try {\n      const dlKey = config.gtm.dataLayerKey || 'dataLayer';\n      const dl = window[dlKey] as unknown[] | undefined;\n\n      if (!Array.isArray(dl)) {\n        warn('GTM: dataLayer not found, cannot push event');\n        return;\n      }\n\n      // Use the original push to avoid our interceptor re-processing this event\n      const pushFn = _originalPush ?? dl.push.bind(dl);\n\n      pushFn({\n        event,\n        ...data,\n        _source: 'meta-capi-tracker',\n      });\n\n      log('GTM: pushed to dataLayer:', event);\n    } catch (err) {\n      warn('GTM: error pushing to dataLayer', event, err);\n    }\n  },\n\n  /**\n   * Push a MetaTracker event result to the dataLayer for other GTM tags.\n   */\n  notifyDataLayer(eventName: string, eventId: string | undefined, customData: CustomData = {}): void {\n    if (!config.gtm.enabled || !config.gtm.pushToDataLayer) return;\n\n    try {\n      this.pushToDataLayer('meta_capi_event', {\n        meta_event_name: eventName,\n        meta_event_id: eventId,\n        meta_custom_data: customData,\n      });\n    } catch (err) {\n      warn('GTM: error notifying dataLayer', eventName, err);\n    }\n  },\n\n  isInitialized(): boolean {\n    return _initialized;\n  },\n};\n"],
  "mappings": "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",
  "names": []
}
